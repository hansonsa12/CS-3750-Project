{"ast":null,"code":"/* global window: false */\n\n/* global document: false */\n'use strict';\n\nvar color = require('chartjs-color');\n\nmodule.exports = function (Chart) {\n  // Global Chart helpers object for utility methods and classes\n  var helpers = Chart.helpers = {}; // -- Basic js utility methods\n\n  helpers.each = function (loopable, callback, self, reverse) {\n    // Check to see if null or undefined firstly.\n    var i, len;\n\n    if (helpers.isArray(loopable)) {\n      len = loopable.length;\n\n      if (reverse) {\n        for (i = len - 1; i >= 0; i--) {\n          callback.call(self, loopable[i], i);\n        }\n      } else {\n        for (i = 0; i < len; i++) {\n          callback.call(self, loopable[i], i);\n        }\n      }\n    } else if (typeof loopable === 'object') {\n      var keys = Object.keys(loopable);\n      len = keys.length;\n\n      for (i = 0; i < len; i++) {\n        callback.call(self, loopable[keys[i]], keys[i]);\n      }\n    }\n  };\n\n  helpers.clone = function (obj) {\n    var objClone = {};\n    helpers.each(obj, function (value, key) {\n      if (helpers.isArray(value)) {\n        objClone[key] = value.slice(0);\n      } else if (typeof value === 'object' && value !== null) {\n        objClone[key] = helpers.clone(value);\n      } else {\n        objClone[key] = value;\n      }\n    });\n    return objClone;\n  };\n\n  helpers.extend = function (base) {\n    var setFn = function (value, key) {\n      base[key] = value;\n    };\n\n    for (var i = 1, ilen = arguments.length; i < ilen; i++) {\n      helpers.each(arguments[i], setFn);\n    }\n\n    return base;\n  }; // Need a special merge function to chart configs since they are now grouped\n\n\n  helpers.configMerge = function (_base) {\n    var base = helpers.clone(_base);\n    helpers.each(Array.prototype.slice.call(arguments, 1), function (extension) {\n      helpers.each(extension, function (value, key) {\n        var baseHasProperty = base.hasOwnProperty(key);\n        var baseVal = baseHasProperty ? base[key] : {};\n\n        if (key === 'scales') {\n          // Scale config merging is complex. Add our own function here for that\n          base[key] = helpers.scaleMerge(baseVal, value);\n        } else if (key === 'scale') {\n          // Used in polar area & radar charts since there is only one scale\n          base[key] = helpers.configMerge(baseVal, Chart.scaleService.getScaleDefaults(value.type), value);\n        } else if (baseHasProperty && typeof baseVal === 'object' && !helpers.isArray(baseVal) && baseVal !== null && typeof value === 'object' && !helpers.isArray(value)) {\n          // If we are overwriting an object with an object, do a merge of the properties.\n          base[key] = helpers.configMerge(baseVal, value);\n        } else {\n          // can just overwrite the value in this case\n          base[key] = value;\n        }\n      });\n    });\n    return base;\n  };\n\n  helpers.scaleMerge = function (_base, extension) {\n    var base = helpers.clone(_base);\n    helpers.each(extension, function (value, key) {\n      if (key === 'xAxes' || key === 'yAxes') {\n        // These properties are arrays of items\n        if (base.hasOwnProperty(key)) {\n          helpers.each(value, function (valueObj, index) {\n            var axisType = helpers.getValueOrDefault(valueObj.type, key === 'xAxes' ? 'category' : 'linear');\n            var axisDefaults = Chart.scaleService.getScaleDefaults(axisType);\n\n            if (index >= base[key].length || !base[key][index].type) {\n              base[key].push(helpers.configMerge(axisDefaults, valueObj));\n            } else if (valueObj.type && valueObj.type !== base[key][index].type) {\n              // Type changed. Bring in the new defaults before we bring in valueObj so that valueObj can override the correct scale defaults\n              base[key][index] = helpers.configMerge(base[key][index], axisDefaults, valueObj);\n            } else {\n              // Type is the same\n              base[key][index] = helpers.configMerge(base[key][index], valueObj);\n            }\n          });\n        } else {\n          base[key] = [];\n          helpers.each(value, function (valueObj) {\n            var axisType = helpers.getValueOrDefault(valueObj.type, key === 'xAxes' ? 'category' : 'linear');\n            base[key].push(helpers.configMerge(Chart.scaleService.getScaleDefaults(axisType), valueObj));\n          });\n        }\n      } else if (base.hasOwnProperty(key) && typeof base[key] === 'object' && base[key] !== null && typeof value === 'object') {\n        // If we are overwriting an object with an object, do a merge of the properties.\n        base[key] = helpers.configMerge(base[key], value);\n      } else {\n        // can just overwrite the value in this case\n        base[key] = value;\n      }\n    });\n    return base;\n  };\n\n  helpers.getValueAtIndexOrDefault = function (value, index, defaultValue) {\n    if (value === undefined || value === null) {\n      return defaultValue;\n    }\n\n    if (helpers.isArray(value)) {\n      return index < value.length ? value[index] : defaultValue;\n    }\n\n    return value;\n  };\n\n  helpers.getValueOrDefault = function (value, defaultValue) {\n    return value === undefined ? defaultValue : value;\n  };\n\n  helpers.indexOf = Array.prototype.indexOf ? function (array, item) {\n    return array.indexOf(item);\n  } : function (array, item) {\n    for (var i = 0, ilen = array.length; i < ilen; ++i) {\n      if (array[i] === item) {\n        return i;\n      }\n    }\n\n    return -1;\n  };\n\n  helpers.where = function (collection, filterCallback) {\n    if (helpers.isArray(collection) && Array.prototype.filter) {\n      return collection.filter(filterCallback);\n    }\n\n    var filtered = [];\n    helpers.each(collection, function (item) {\n      if (filterCallback(item)) {\n        filtered.push(item);\n      }\n    });\n    return filtered;\n  };\n\n  helpers.findIndex = Array.prototype.findIndex ? function (array, callback, scope) {\n    return array.findIndex(callback, scope);\n  } : function (array, callback, scope) {\n    scope = scope === undefined ? array : scope;\n\n    for (var i = 0, ilen = array.length; i < ilen; ++i) {\n      if (callback.call(scope, array[i], i, array)) {\n        return i;\n      }\n    }\n\n    return -1;\n  };\n\n  helpers.findNextWhere = function (arrayToSearch, filterCallback, startIndex) {\n    // Default to start of the array\n    if (startIndex === undefined || startIndex === null) {\n      startIndex = -1;\n    }\n\n    for (var i = startIndex + 1; i < arrayToSearch.length; i++) {\n      var currentItem = arrayToSearch[i];\n\n      if (filterCallback(currentItem)) {\n        return currentItem;\n      }\n    }\n  };\n\n  helpers.findPreviousWhere = function (arrayToSearch, filterCallback, startIndex) {\n    // Default to end of the array\n    if (startIndex === undefined || startIndex === null) {\n      startIndex = arrayToSearch.length;\n    }\n\n    for (var i = startIndex - 1; i >= 0; i--) {\n      var currentItem = arrayToSearch[i];\n\n      if (filterCallback(currentItem)) {\n        return currentItem;\n      }\n    }\n  };\n\n  helpers.inherits = function (extensions) {\n    // Basic javascript inheritance based on the model created in Backbone.js\n    var me = this;\n    var ChartElement = extensions && extensions.hasOwnProperty('constructor') ? extensions.constructor : function () {\n      return me.apply(this, arguments);\n    };\n\n    var Surrogate = function () {\n      this.constructor = ChartElement;\n    };\n\n    Surrogate.prototype = me.prototype;\n    ChartElement.prototype = new Surrogate();\n    ChartElement.extend = helpers.inherits;\n\n    if (extensions) {\n      helpers.extend(ChartElement.prototype, extensions);\n    }\n\n    ChartElement.__super__ = me.prototype;\n    return ChartElement;\n  };\n\n  helpers.noop = function () {};\n\n  helpers.uid = function () {\n    var id = 0;\n    return function () {\n      return id++;\n    };\n  }(); // -- Math methods\n\n\n  helpers.isNumber = function (n) {\n    return !isNaN(parseFloat(n)) && isFinite(n);\n  };\n\n  helpers.almostEquals = function (x, y, epsilon) {\n    return Math.abs(x - y) < epsilon;\n  };\n\n  helpers.almostWhole = function (x, epsilon) {\n    var rounded = Math.round(x);\n    return rounded - epsilon < x && rounded + epsilon > x;\n  };\n\n  helpers.max = function (array) {\n    return array.reduce(function (max, value) {\n      if (!isNaN(value)) {\n        return Math.max(max, value);\n      }\n\n      return max;\n    }, Number.NEGATIVE_INFINITY);\n  };\n\n  helpers.min = function (array) {\n    return array.reduce(function (min, value) {\n      if (!isNaN(value)) {\n        return Math.min(min, value);\n      }\n\n      return min;\n    }, Number.POSITIVE_INFINITY);\n  };\n\n  helpers.sign = Math.sign ? function (x) {\n    return Math.sign(x);\n  } : function (x) {\n    x = +x; // convert to a number\n\n    if (x === 0 || isNaN(x)) {\n      return x;\n    }\n\n    return x > 0 ? 1 : -1;\n  };\n  helpers.log10 = Math.log10 ? function (x) {\n    return Math.log10(x);\n  } : function (x) {\n    return Math.log(x) / Math.LN10;\n  };\n\n  helpers.toRadians = function (degrees) {\n    return degrees * (Math.PI / 180);\n  };\n\n  helpers.toDegrees = function (radians) {\n    return radians * (180 / Math.PI);\n  }; // Gets the angle from vertical upright to the point about a centre.\n\n\n  helpers.getAngleFromPoint = function (centrePoint, anglePoint) {\n    var distanceFromXCenter = anglePoint.x - centrePoint.x,\n        distanceFromYCenter = anglePoint.y - centrePoint.y,\n        radialDistanceFromCenter = Math.sqrt(distanceFromXCenter * distanceFromXCenter + distanceFromYCenter * distanceFromYCenter);\n    var angle = Math.atan2(distanceFromYCenter, distanceFromXCenter);\n\n    if (angle < -0.5 * Math.PI) {\n      angle += 2.0 * Math.PI; // make sure the returned angle is in the range of (-PI/2, 3PI/2]\n    }\n\n    return {\n      angle: angle,\n      distance: radialDistanceFromCenter\n    };\n  };\n\n  helpers.distanceBetweenPoints = function (pt1, pt2) {\n    return Math.sqrt(Math.pow(pt2.x - pt1.x, 2) + Math.pow(pt2.y - pt1.y, 2));\n  };\n\n  helpers.aliasPixel = function (pixelWidth) {\n    return pixelWidth % 2 === 0 ? 0 : 0.5;\n  };\n\n  helpers.splineCurve = function (firstPoint, middlePoint, afterPoint, t) {\n    // Props to Rob Spencer at scaled innovation for his post on splining between points\n    // http://scaledinnovation.com/analytics/splines/aboutSplines.html\n    // This function must also respect \"skipped\" points\n    var previous = firstPoint.skip ? middlePoint : firstPoint,\n        current = middlePoint,\n        next = afterPoint.skip ? middlePoint : afterPoint;\n    var d01 = Math.sqrt(Math.pow(current.x - previous.x, 2) + Math.pow(current.y - previous.y, 2));\n    var d12 = Math.sqrt(Math.pow(next.x - current.x, 2) + Math.pow(next.y - current.y, 2));\n    var s01 = d01 / (d01 + d12);\n    var s12 = d12 / (d01 + d12); // If all points are the same, s01 & s02 will be inf\n\n    s01 = isNaN(s01) ? 0 : s01;\n    s12 = isNaN(s12) ? 0 : s12;\n    var fa = t * s01; // scaling factor for triangle Ta\n\n    var fb = t * s12;\n    return {\n      previous: {\n        x: current.x - fa * (next.x - previous.x),\n        y: current.y - fa * (next.y - previous.y)\n      },\n      next: {\n        x: current.x + fb * (next.x - previous.x),\n        y: current.y + fb * (next.y - previous.y)\n      }\n    };\n  };\n\n  helpers.EPSILON = Number.EPSILON || 1e-14;\n\n  helpers.splineCurveMonotone = function (points) {\n    // This function calculates Bézier control points in a similar way than |splineCurve|,\n    // but preserves monotonicity of the provided data and ensures no local extremums are added\n    // between the dataset discrete points due to the interpolation.\n    // See : https://en.wikipedia.org/wiki/Monotone_cubic_interpolation\n    var pointsWithTangents = (points || []).map(function (point) {\n      return {\n        model: point._model,\n        deltaK: 0,\n        mK: 0\n      };\n    }); // Calculate slopes (deltaK) and initialize tangents (mK)\n\n    var pointsLen = pointsWithTangents.length;\n    var i, pointBefore, pointCurrent, pointAfter;\n\n    for (i = 0; i < pointsLen; ++i) {\n      pointCurrent = pointsWithTangents[i];\n\n      if (pointCurrent.model.skip) {\n        continue;\n      }\n\n      pointBefore = i > 0 ? pointsWithTangents[i - 1] : null;\n      pointAfter = i < pointsLen - 1 ? pointsWithTangents[i + 1] : null;\n\n      if (pointAfter && !pointAfter.model.skip) {\n        var slopeDeltaX = pointAfter.model.x - pointCurrent.model.x; // In the case of two points that appear at the same x pixel, slopeDeltaX is 0\n\n        pointCurrent.deltaK = slopeDeltaX !== 0 ? (pointAfter.model.y - pointCurrent.model.y) / slopeDeltaX : 0;\n      }\n\n      if (!pointBefore || pointBefore.model.skip) {\n        pointCurrent.mK = pointCurrent.deltaK;\n      } else if (!pointAfter || pointAfter.model.skip) {\n        pointCurrent.mK = pointBefore.deltaK;\n      } else if (this.sign(pointBefore.deltaK) !== this.sign(pointCurrent.deltaK)) {\n        pointCurrent.mK = 0;\n      } else {\n        pointCurrent.mK = (pointBefore.deltaK + pointCurrent.deltaK) / 2;\n      }\n    } // Adjust tangents to ensure monotonic properties\n\n\n    var alphaK, betaK, tauK, squaredMagnitude;\n\n    for (i = 0; i < pointsLen - 1; ++i) {\n      pointCurrent = pointsWithTangents[i];\n      pointAfter = pointsWithTangents[i + 1];\n\n      if (pointCurrent.model.skip || pointAfter.model.skip) {\n        continue;\n      }\n\n      if (helpers.almostEquals(pointCurrent.deltaK, 0, this.EPSILON)) {\n        pointCurrent.mK = pointAfter.mK = 0;\n        continue;\n      }\n\n      alphaK = pointCurrent.mK / pointCurrent.deltaK;\n      betaK = pointAfter.mK / pointCurrent.deltaK;\n      squaredMagnitude = Math.pow(alphaK, 2) + Math.pow(betaK, 2);\n\n      if (squaredMagnitude <= 9) {\n        continue;\n      }\n\n      tauK = 3 / Math.sqrt(squaredMagnitude);\n      pointCurrent.mK = alphaK * tauK * pointCurrent.deltaK;\n      pointAfter.mK = betaK * tauK * pointCurrent.deltaK;\n    } // Compute control points\n\n\n    var deltaX;\n\n    for (i = 0; i < pointsLen; ++i) {\n      pointCurrent = pointsWithTangents[i];\n\n      if (pointCurrent.model.skip) {\n        continue;\n      }\n\n      pointBefore = i > 0 ? pointsWithTangents[i - 1] : null;\n      pointAfter = i < pointsLen - 1 ? pointsWithTangents[i + 1] : null;\n\n      if (pointBefore && !pointBefore.model.skip) {\n        deltaX = (pointCurrent.model.x - pointBefore.model.x) / 3;\n        pointCurrent.model.controlPointPreviousX = pointCurrent.model.x - deltaX;\n        pointCurrent.model.controlPointPreviousY = pointCurrent.model.y - deltaX * pointCurrent.mK;\n      }\n\n      if (pointAfter && !pointAfter.model.skip) {\n        deltaX = (pointAfter.model.x - pointCurrent.model.x) / 3;\n        pointCurrent.model.controlPointNextX = pointCurrent.model.x + deltaX;\n        pointCurrent.model.controlPointNextY = pointCurrent.model.y + deltaX * pointCurrent.mK;\n      }\n    }\n  };\n\n  helpers.nextItem = function (collection, index, loop) {\n    if (loop) {\n      return index >= collection.length - 1 ? collection[0] : collection[index + 1];\n    }\n\n    return index >= collection.length - 1 ? collection[collection.length - 1] : collection[index + 1];\n  };\n\n  helpers.previousItem = function (collection, index, loop) {\n    if (loop) {\n      return index <= 0 ? collection[collection.length - 1] : collection[index - 1];\n    }\n\n    return index <= 0 ? collection[0] : collection[index - 1];\n  }; // Implementation of the nice number algorithm used in determining where axis labels will go\n\n\n  helpers.niceNum = function (range, round) {\n    var exponent = Math.floor(helpers.log10(range));\n    var fraction = range / Math.pow(10, exponent);\n    var niceFraction;\n\n    if (round) {\n      if (fraction < 1.5) {\n        niceFraction = 1;\n      } else if (fraction < 3) {\n        niceFraction = 2;\n      } else if (fraction < 7) {\n        niceFraction = 5;\n      } else {\n        niceFraction = 10;\n      }\n    } else if (fraction <= 1.0) {\n      niceFraction = 1;\n    } else if (fraction <= 2) {\n      niceFraction = 2;\n    } else if (fraction <= 5) {\n      niceFraction = 5;\n    } else {\n      niceFraction = 10;\n    }\n\n    return niceFraction * Math.pow(10, exponent);\n  }; // Easing functions adapted from Robert Penner's easing equations\n  // http://www.robertpenner.com/easing/\n\n\n  var easingEffects = helpers.easingEffects = {\n    linear: function (t) {\n      return t;\n    },\n    easeInQuad: function (t) {\n      return t * t;\n    },\n    easeOutQuad: function (t) {\n      return -1 * t * (t - 2);\n    },\n    easeInOutQuad: function (t) {\n      if ((t /= 1 / 2) < 1) {\n        return 1 / 2 * t * t;\n      }\n\n      return -1 / 2 * (--t * (t - 2) - 1);\n    },\n    easeInCubic: function (t) {\n      return t * t * t;\n    },\n    easeOutCubic: function (t) {\n      return 1 * ((t = t / 1 - 1) * t * t + 1);\n    },\n    easeInOutCubic: function (t) {\n      if ((t /= 1 / 2) < 1) {\n        return 1 / 2 * t * t * t;\n      }\n\n      return 1 / 2 * ((t -= 2) * t * t + 2);\n    },\n    easeInQuart: function (t) {\n      return t * t * t * t;\n    },\n    easeOutQuart: function (t) {\n      return -1 * ((t = t / 1 - 1) * t * t * t - 1);\n    },\n    easeInOutQuart: function (t) {\n      if ((t /= 1 / 2) < 1) {\n        return 1 / 2 * t * t * t * t;\n      }\n\n      return -1 / 2 * ((t -= 2) * t * t * t - 2);\n    },\n    easeInQuint: function (t) {\n      return 1 * (t /= 1) * t * t * t * t;\n    },\n    easeOutQuint: function (t) {\n      return 1 * ((t = t / 1 - 1) * t * t * t * t + 1);\n    },\n    easeInOutQuint: function (t) {\n      if ((t /= 1 / 2) < 1) {\n        return 1 / 2 * t * t * t * t * t;\n      }\n\n      return 1 / 2 * ((t -= 2) * t * t * t * t + 2);\n    },\n    easeInSine: function (t) {\n      return -1 * Math.cos(t / 1 * (Math.PI / 2)) + 1;\n    },\n    easeOutSine: function (t) {\n      return 1 * Math.sin(t / 1 * (Math.PI / 2));\n    },\n    easeInOutSine: function (t) {\n      return -1 / 2 * (Math.cos(Math.PI * t / 1) - 1);\n    },\n    easeInExpo: function (t) {\n      return t === 0 ? 1 : 1 * Math.pow(2, 10 * (t / 1 - 1));\n    },\n    easeOutExpo: function (t) {\n      return t === 1 ? 1 : 1 * (-Math.pow(2, -10 * t / 1) + 1);\n    },\n    easeInOutExpo: function (t) {\n      if (t === 0) {\n        return 0;\n      }\n\n      if (t === 1) {\n        return 1;\n      }\n\n      if ((t /= 1 / 2) < 1) {\n        return 1 / 2 * Math.pow(2, 10 * (t - 1));\n      }\n\n      return 1 / 2 * (-Math.pow(2, -10 * --t) + 2);\n    },\n    easeInCirc: function (t) {\n      if (t >= 1) {\n        return t;\n      }\n\n      return -1 * (Math.sqrt(1 - (t /= 1) * t) - 1);\n    },\n    easeOutCirc: function (t) {\n      return 1 * Math.sqrt(1 - (t = t / 1 - 1) * t);\n    },\n    easeInOutCirc: function (t) {\n      if ((t /= 1 / 2) < 1) {\n        return -1 / 2 * (Math.sqrt(1 - t * t) - 1);\n      }\n\n      return 1 / 2 * (Math.sqrt(1 - (t -= 2) * t) + 1);\n    },\n    easeInElastic: function (t) {\n      var s = 1.70158;\n      var p = 0;\n      var a = 1;\n\n      if (t === 0) {\n        return 0;\n      }\n\n      if ((t /= 1) === 1) {\n        return 1;\n      }\n\n      if (!p) {\n        p = 1 * 0.3;\n      }\n\n      if (a < Math.abs(1)) {\n        a = 1;\n        s = p / 4;\n      } else {\n        s = p / (2 * Math.PI) * Math.asin(1 / a);\n      }\n\n      return -(a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * 1 - s) * (2 * Math.PI) / p));\n    },\n    easeOutElastic: function (t) {\n      var s = 1.70158;\n      var p = 0;\n      var a = 1;\n\n      if (t === 0) {\n        return 0;\n      }\n\n      if ((t /= 1) === 1) {\n        return 1;\n      }\n\n      if (!p) {\n        p = 1 * 0.3;\n      }\n\n      if (a < Math.abs(1)) {\n        a = 1;\n        s = p / 4;\n      } else {\n        s = p / (2 * Math.PI) * Math.asin(1 / a);\n      }\n\n      return a * Math.pow(2, -10 * t) * Math.sin((t * 1 - s) * (2 * Math.PI) / p) + 1;\n    },\n    easeInOutElastic: function (t) {\n      var s = 1.70158;\n      var p = 0;\n      var a = 1;\n\n      if (t === 0) {\n        return 0;\n      }\n\n      if ((t /= 1 / 2) === 2) {\n        return 1;\n      }\n\n      if (!p) {\n        p = 1 * (0.3 * 1.5);\n      }\n\n      if (a < Math.abs(1)) {\n        a = 1;\n        s = p / 4;\n      } else {\n        s = p / (2 * Math.PI) * Math.asin(1 / a);\n      }\n\n      if (t < 1) {\n        return -0.5 * (a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * 1 - s) * (2 * Math.PI) / p));\n      }\n\n      return a * Math.pow(2, -10 * (t -= 1)) * Math.sin((t * 1 - s) * (2 * Math.PI) / p) * 0.5 + 1;\n    },\n    easeInBack: function (t) {\n      var s = 1.70158;\n      return 1 * (t /= 1) * t * ((s + 1) * t - s);\n    },\n    easeOutBack: function (t) {\n      var s = 1.70158;\n      return 1 * ((t = t / 1 - 1) * t * ((s + 1) * t + s) + 1);\n    },\n    easeInOutBack: function (t) {\n      var s = 1.70158;\n\n      if ((t /= 1 / 2) < 1) {\n        return 1 / 2 * (t * t * (((s *= 1.525) + 1) * t - s));\n      }\n\n      return 1 / 2 * ((t -= 2) * t * (((s *= 1.525) + 1) * t + s) + 2);\n    },\n    easeInBounce: function (t) {\n      return 1 - easingEffects.easeOutBounce(1 - t);\n    },\n    easeOutBounce: function (t) {\n      if ((t /= 1) < 1 / 2.75) {\n        return 1 * (7.5625 * t * t);\n      } else if (t < 2 / 2.75) {\n        return 1 * (7.5625 * (t -= 1.5 / 2.75) * t + 0.75);\n      } else if (t < 2.5 / 2.75) {\n        return 1 * (7.5625 * (t -= 2.25 / 2.75) * t + 0.9375);\n      }\n\n      return 1 * (7.5625 * (t -= 2.625 / 2.75) * t + 0.984375);\n    },\n    easeInOutBounce: function (t) {\n      if (t < 1 / 2) {\n        return easingEffects.easeInBounce(t * 2) * 0.5;\n      }\n\n      return easingEffects.easeOutBounce(t * 2 - 1) * 0.5 + 1 * 0.5;\n    }\n  }; // Request animation polyfill - http://www.paulirish.com/2011/requestanimationframe-for-smart-animating/\n\n  helpers.requestAnimFrame = function () {\n    return window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function (callback) {\n      return window.setTimeout(callback, 1000 / 60);\n    };\n  }(); // -- DOM methods\n\n\n  helpers.getRelativePosition = function (evt, chart) {\n    var mouseX, mouseY;\n    var e = evt.originalEvent || evt,\n        canvas = evt.currentTarget || evt.srcElement,\n        boundingRect = canvas.getBoundingClientRect();\n    var touches = e.touches;\n\n    if (touches && touches.length > 0) {\n      mouseX = touches[0].clientX;\n      mouseY = touches[0].clientY;\n    } else {\n      mouseX = e.clientX;\n      mouseY = e.clientY;\n    } // Scale mouse coordinates into canvas coordinates\n    // by following the pattern laid out by 'jerryj' in the comments of\n    // http://www.html5canvastutorials.com/advanced/html5-canvas-mouse-coordinates/\n\n\n    var paddingLeft = parseFloat(helpers.getStyle(canvas, 'padding-left'));\n    var paddingTop = parseFloat(helpers.getStyle(canvas, 'padding-top'));\n    var paddingRight = parseFloat(helpers.getStyle(canvas, 'padding-right'));\n    var paddingBottom = parseFloat(helpers.getStyle(canvas, 'padding-bottom'));\n    var width = boundingRect.right - boundingRect.left - paddingLeft - paddingRight;\n    var height = boundingRect.bottom - boundingRect.top - paddingTop - paddingBottom; // We divide by the current device pixel ratio, because the canvas is scaled up by that amount in each direction. However\n    // the backend model is in unscaled coordinates. Since we are going to deal with our model coordinates, we go back here\n\n    mouseX = Math.round((mouseX - boundingRect.left - paddingLeft) / width * canvas.width / chart.currentDevicePixelRatio);\n    mouseY = Math.round((mouseY - boundingRect.top - paddingTop) / height * canvas.height / chart.currentDevicePixelRatio);\n    return {\n      x: mouseX,\n      y: mouseY\n    };\n  };\n\n  helpers.addEvent = function (node, eventType, method) {\n    if (node.addEventListener) {\n      node.addEventListener(eventType, method);\n    } else if (node.attachEvent) {\n      node.attachEvent('on' + eventType, method);\n    } else {\n      node['on' + eventType] = method;\n    }\n  };\n\n  helpers.removeEvent = function (node, eventType, handler) {\n    if (node.removeEventListener) {\n      node.removeEventListener(eventType, handler, false);\n    } else if (node.detachEvent) {\n      node.detachEvent('on' + eventType, handler);\n    } else {\n      node['on' + eventType] = helpers.noop;\n    }\n  }; // Private helper function to convert max-width/max-height values that may be percentages into a number\n\n\n  function parseMaxStyle(styleValue, node, parentProperty) {\n    var valueInPixels;\n\n    if (typeof styleValue === 'string') {\n      valueInPixels = parseInt(styleValue, 10);\n\n      if (styleValue.indexOf('%') !== -1) {\n        // percentage * size in dimension\n        valueInPixels = valueInPixels / 100 * node.parentNode[parentProperty];\n      }\n    } else {\n      valueInPixels = styleValue;\n    }\n\n    return valueInPixels;\n  }\n  /**\n   * Returns if the given value contains an effective constraint.\n   * @private\n   */\n\n\n  function isConstrainedValue(value) {\n    return value !== undefined && value !== null && value !== 'none';\n  } // Private helper to get a constraint dimension\n  // @param domNode : the node to check the constraint on\n  // @param maxStyle : the style that defines the maximum for the direction we are using (maxWidth / maxHeight)\n  // @param percentageProperty : property of parent to use when calculating width as a percentage\n  // @see http://www.nathanaeljones.com/blog/2013/reading-max-width-cross-browser\n\n\n  function getConstraintDimension(domNode, maxStyle, percentageProperty) {\n    var view = document.defaultView;\n    var parentNode = domNode.parentNode;\n    var constrainedNode = view.getComputedStyle(domNode)[maxStyle];\n    var constrainedContainer = view.getComputedStyle(parentNode)[maxStyle];\n    var hasCNode = isConstrainedValue(constrainedNode);\n    var hasCContainer = isConstrainedValue(constrainedContainer);\n    var infinity = Number.POSITIVE_INFINITY;\n\n    if (hasCNode || hasCContainer) {\n      return Math.min(hasCNode ? parseMaxStyle(constrainedNode, domNode, percentageProperty) : infinity, hasCContainer ? parseMaxStyle(constrainedContainer, parentNode, percentageProperty) : infinity);\n    }\n\n    return 'none';\n  } // returns Number or undefined if no constraint\n\n\n  helpers.getConstraintWidth = function (domNode) {\n    return getConstraintDimension(domNode, 'max-width', 'clientWidth');\n  }; // returns Number or undefined if no constraint\n\n\n  helpers.getConstraintHeight = function (domNode) {\n    return getConstraintDimension(domNode, 'max-height', 'clientHeight');\n  };\n\n  helpers.getMaximumWidth = function (domNode) {\n    var container = domNode.parentNode;\n    var paddingLeft = parseInt(helpers.getStyle(container, 'padding-left'), 10);\n    var paddingRight = parseInt(helpers.getStyle(container, 'padding-right'), 10);\n    var w = container.clientWidth - paddingLeft - paddingRight;\n    var cw = helpers.getConstraintWidth(domNode);\n    return isNaN(cw) ? w : Math.min(w, cw);\n  };\n\n  helpers.getMaximumHeight = function (domNode) {\n    var container = domNode.parentNode;\n    var paddingTop = parseInt(helpers.getStyle(container, 'padding-top'), 10);\n    var paddingBottom = parseInt(helpers.getStyle(container, 'padding-bottom'), 10);\n    var h = container.clientHeight - paddingTop - paddingBottom;\n    var ch = helpers.getConstraintHeight(domNode);\n    return isNaN(ch) ? h : Math.min(h, ch);\n  };\n\n  helpers.getStyle = function (el, property) {\n    return el.currentStyle ? el.currentStyle[property] : document.defaultView.getComputedStyle(el, null).getPropertyValue(property);\n  };\n\n  helpers.retinaScale = function (chart) {\n    var pixelRatio = chart.currentDevicePixelRatio = window.devicePixelRatio || 1;\n\n    if (pixelRatio === 1) {\n      return;\n    }\n\n    var canvas = chart.canvas;\n    var height = chart.height;\n    var width = chart.width;\n    canvas.height = height * pixelRatio;\n    canvas.width = width * pixelRatio;\n    chart.ctx.scale(pixelRatio, pixelRatio); // If no style has been set on the canvas, the render size is used as display size,\n    // making the chart visually bigger, so let's enforce it to the \"correct\" values.\n    // See https://github.com/chartjs/Chart.js/issues/3575\n\n    canvas.style.height = height + 'px';\n    canvas.style.width = width + 'px';\n  }; // -- Canvas methods\n\n\n  helpers.clear = function (chart) {\n    chart.ctx.clearRect(0, 0, chart.width, chart.height);\n  };\n\n  helpers.fontString = function (pixelSize, fontStyle, fontFamily) {\n    return fontStyle + ' ' + pixelSize + 'px ' + fontFamily;\n  };\n\n  helpers.longestText = function (ctx, font, arrayOfThings, cache) {\n    cache = cache || {};\n    var data = cache.data = cache.data || {};\n    var gc = cache.garbageCollect = cache.garbageCollect || [];\n\n    if (cache.font !== font) {\n      data = cache.data = {};\n      gc = cache.garbageCollect = [];\n      cache.font = font;\n    }\n\n    ctx.font = font;\n    var longest = 0;\n    helpers.each(arrayOfThings, function (thing) {\n      // Undefined strings and arrays should not be measured\n      if (thing !== undefined && thing !== null && helpers.isArray(thing) !== true) {\n        longest = helpers.measureText(ctx, data, gc, longest, thing);\n      } else if (helpers.isArray(thing)) {\n        // if it is an array lets measure each element\n        // to do maybe simplify this function a bit so we can do this more recursively?\n        helpers.each(thing, function (nestedThing) {\n          // Undefined strings and arrays should not be measured\n          if (nestedThing !== undefined && nestedThing !== null && !helpers.isArray(nestedThing)) {\n            longest = helpers.measureText(ctx, data, gc, longest, nestedThing);\n          }\n        });\n      }\n    });\n    var gcLen = gc.length / 2;\n\n    if (gcLen > arrayOfThings.length) {\n      for (var i = 0; i < gcLen; i++) {\n        delete data[gc[i]];\n      }\n\n      gc.splice(0, gcLen);\n    }\n\n    return longest;\n  };\n\n  helpers.measureText = function (ctx, data, gc, longest, string) {\n    var textWidth = data[string];\n\n    if (!textWidth) {\n      textWidth = data[string] = ctx.measureText(string).width;\n      gc.push(string);\n    }\n\n    if (textWidth > longest) {\n      longest = textWidth;\n    }\n\n    return longest;\n  };\n\n  helpers.numberOfLabelLines = function (arrayOfThings) {\n    var numberOfLines = 1;\n    helpers.each(arrayOfThings, function (thing) {\n      if (helpers.isArray(thing)) {\n        if (thing.length > numberOfLines) {\n          numberOfLines = thing.length;\n        }\n      }\n    });\n    return numberOfLines;\n  };\n\n  helpers.drawRoundedRectangle = function (ctx, x, y, width, height, radius) {\n    ctx.beginPath();\n    ctx.moveTo(x + radius, y);\n    ctx.lineTo(x + width - radius, y);\n    ctx.quadraticCurveTo(x + width, y, x + width, y + radius);\n    ctx.lineTo(x + width, y + height - radius);\n    ctx.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);\n    ctx.lineTo(x + radius, y + height);\n    ctx.quadraticCurveTo(x, y + height, x, y + height - radius);\n    ctx.lineTo(x, y + radius);\n    ctx.quadraticCurveTo(x, y, x + radius, y);\n    ctx.closePath();\n  };\n\n  helpers.color = function (c) {\n    if (!color) {\n      console.error('Color.js not found!');\n      return c;\n    }\n    /* global CanvasGradient */\n\n\n    if (c instanceof CanvasGradient) {\n      return color(Chart.defaults.global.defaultColor);\n    }\n\n    return color(c);\n  };\n\n  helpers.isArray = Array.isArray ? function (obj) {\n    return Array.isArray(obj);\n  } : function (obj) {\n    return Object.prototype.toString.call(obj) === '[object Array]';\n  }; // ! @see http://stackoverflow.com/a/14853974\n\n  helpers.arrayEquals = function (a0, a1) {\n    var i, ilen, v0, v1;\n\n    if (!a0 || !a1 || a0.length !== a1.length) {\n      return false;\n    }\n\n    for (i = 0, ilen = a0.length; i < ilen; ++i) {\n      v0 = a0[i];\n      v1 = a1[i];\n\n      if (v0 instanceof Array && v1 instanceof Array) {\n        if (!helpers.arrayEquals(v0, v1)) {\n          return false;\n        }\n      } else if (v0 !== v1) {\n        // NOTE: two different object instances will never be equal: {x:20} != {x:20}\n        return false;\n      }\n    }\n\n    return true;\n  };\n\n  helpers.callCallback = function (fn, args, _tArg) {\n    if (fn && typeof fn.call === 'function') {\n      fn.apply(_tArg, args);\n    }\n  };\n\n  helpers.getHoverColor = function (colorValue) {\n    /* global CanvasPattern */\n    return colorValue instanceof CanvasPattern ? colorValue : helpers.color(colorValue).saturate(0.5).darken(0.1).rgbString();\n  };\n};","map":{"version":3,"sources":["C:/Users/Kronos/Documents/Programming/Web/React/CS-3750-Project/ClientApp/node_modules/chart.js/src/core/core.helpers.js"],"names":["color","require","module","exports","Chart","helpers","each","loopable","callback","self","reverse","i","len","isArray","length","call","keys","Object","clone","obj","objClone","value","key","slice","extend","base","setFn","ilen","arguments","configMerge","_base","Array","prototype","extension","baseHasProperty","hasOwnProperty","baseVal","scaleMerge","scaleService","getScaleDefaults","type","valueObj","index","axisType","getValueOrDefault","axisDefaults","push","getValueAtIndexOrDefault","defaultValue","undefined","indexOf","array","item","where","collection","filterCallback","filter","filtered","findIndex","scope","findNextWhere","arrayToSearch","startIndex","currentItem","findPreviousWhere","inherits","extensions","me","ChartElement","constructor","apply","Surrogate","__super__","noop","uid","id","isNumber","n","isNaN","parseFloat","isFinite","almostEquals","x","y","epsilon","Math","abs","almostWhole","rounded","round","max","reduce","Number","NEGATIVE_INFINITY","min","POSITIVE_INFINITY","sign","log10","log","LN10","toRadians","degrees","PI","toDegrees","radians","getAngleFromPoint","centrePoint","anglePoint","distanceFromXCenter","distanceFromYCenter","radialDistanceFromCenter","sqrt","angle","atan2","distance","distanceBetweenPoints","pt1","pt2","pow","aliasPixel","pixelWidth","splineCurve","firstPoint","middlePoint","afterPoint","t","previous","skip","current","next","d01","d12","s01","s12","fa","fb","EPSILON","splineCurveMonotone","points","pointsWithTangents","map","point","model","_model","deltaK","mK","pointsLen","pointBefore","pointCurrent","pointAfter","slopeDeltaX","alphaK","betaK","tauK","squaredMagnitude","deltaX","controlPointPreviousX","controlPointPreviousY","controlPointNextX","controlPointNextY","nextItem","loop","previousItem","niceNum","range","exponent","floor","fraction","niceFraction","easingEffects","linear","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeInSine","cos","easeOutSine","sin","easeInOutSine","easeInExpo","easeOutExpo","easeInOutExpo","easeInCirc","easeOutCirc","easeInOutCirc","easeInElastic","s","p","a","asin","easeOutElastic","easeInOutElastic","easeInBack","easeOutBack","easeInOutBack","easeInBounce","easeOutBounce","easeInOutBounce","requestAnimFrame","window","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","setTimeout","getRelativePosition","evt","chart","mouseX","mouseY","e","originalEvent","canvas","currentTarget","srcElement","boundingRect","getBoundingClientRect","touches","clientX","clientY","paddingLeft","getStyle","paddingTop","paddingRight","paddingBottom","width","right","left","height","bottom","top","currentDevicePixelRatio","addEvent","node","eventType","method","addEventListener","attachEvent","removeEvent","handler","removeEventListener","detachEvent","parseMaxStyle","styleValue","parentProperty","valueInPixels","parseInt","parentNode","isConstrainedValue","getConstraintDimension","domNode","maxStyle","percentageProperty","view","document","defaultView","constrainedNode","getComputedStyle","constrainedContainer","hasCNode","hasCContainer","infinity","getConstraintWidth","getConstraintHeight","getMaximumWidth","container","w","clientWidth","cw","getMaximumHeight","h","clientHeight","ch","el","property","currentStyle","getPropertyValue","retinaScale","pixelRatio","devicePixelRatio","ctx","scale","style","clear","clearRect","fontString","pixelSize","fontStyle","fontFamily","longestText","font","arrayOfThings","cache","data","gc","garbageCollect","longest","thing","measureText","nestedThing","gcLen","splice","string","textWidth","numberOfLabelLines","numberOfLines","drawRoundedRectangle","radius","beginPath","moveTo","lineTo","quadraticCurveTo","closePath","c","console","error","CanvasGradient","defaults","global","defaultColor","toString","arrayEquals","a0","a1","v0","v1","callCallback","fn","args","_tArg","getHoverColor","colorValue","CanvasPattern","saturate","darken","rgbString"],"mappings":"AAAA;;AACA;AACA;;AAEA,IAAIA,KAAK,GAAGC,OAAO,CAAC,eAAD,CAAnB;;AAEAC,MAAM,CAACC,OAAP,GAAiB,UAASC,KAAT,EAAgB;AAChC;AACA,MAAIC,OAAO,GAAGD,KAAK,CAACC,OAAN,GAAgB,EAA9B,CAFgC,CAIhC;;AACAA,EAAAA,OAAO,CAACC,IAAR,GAAe,UAASC,QAAT,EAAmBC,QAAnB,EAA6BC,IAA7B,EAAmCC,OAAnC,EAA4C;AAC1D;AACA,QAAIC,CAAJ,EAAOC,GAAP;;AACA,QAAIP,OAAO,CAACQ,OAAR,CAAgBN,QAAhB,CAAJ,EAA+B;AAC9BK,MAAAA,GAAG,GAAGL,QAAQ,CAACO,MAAf;;AACA,UAAIJ,OAAJ,EAAa;AACZ,aAAKC,CAAC,GAAGC,GAAG,GAAG,CAAf,EAAkBD,CAAC,IAAI,CAAvB,EAA0BA,CAAC,EAA3B,EAA+B;AAC9BH,UAAAA,QAAQ,CAACO,IAAT,CAAcN,IAAd,EAAoBF,QAAQ,CAACI,CAAD,CAA5B,EAAiCA,CAAjC;AACA;AACD,OAJD,MAIO;AACN,aAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGC,GAAhB,EAAqBD,CAAC,EAAtB,EAA0B;AACzBH,UAAAA,QAAQ,CAACO,IAAT,CAAcN,IAAd,EAAoBF,QAAQ,CAACI,CAAD,CAA5B,EAAiCA,CAAjC;AACA;AACD;AACD,KAXD,MAWO,IAAI,OAAOJ,QAAP,KAAoB,QAAxB,EAAkC;AACxC,UAAIS,IAAI,GAAGC,MAAM,CAACD,IAAP,CAAYT,QAAZ,CAAX;AACAK,MAAAA,GAAG,GAAGI,IAAI,CAACF,MAAX;;AACA,WAAKH,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGC,GAAhB,EAAqBD,CAAC,EAAtB,EAA0B;AACzBH,QAAAA,QAAQ,CAACO,IAAT,CAAcN,IAAd,EAAoBF,QAAQ,CAACS,IAAI,CAACL,CAAD,CAAL,CAA5B,EAAuCK,IAAI,CAACL,CAAD,CAA3C;AACA;AACD;AACD,GArBD;;AAsBAN,EAAAA,OAAO,CAACa,KAAR,GAAgB,UAASC,GAAT,EAAc;AAC7B,QAAIC,QAAQ,GAAG,EAAf;AACAf,IAAAA,OAAO,CAACC,IAAR,CAAaa,GAAb,EAAkB,UAASE,KAAT,EAAgBC,GAAhB,EAAqB;AACtC,UAAIjB,OAAO,CAACQ,OAAR,CAAgBQ,KAAhB,CAAJ,EAA4B;AAC3BD,QAAAA,QAAQ,CAACE,GAAD,CAAR,GAAgBD,KAAK,CAACE,KAAN,CAAY,CAAZ,CAAhB;AACA,OAFD,MAEO,IAAI,OAAOF,KAAP,KAAiB,QAAjB,IAA6BA,KAAK,KAAK,IAA3C,EAAiD;AACvDD,QAAAA,QAAQ,CAACE,GAAD,CAAR,GAAgBjB,OAAO,CAACa,KAAR,CAAcG,KAAd,CAAhB;AACA,OAFM,MAEA;AACND,QAAAA,QAAQ,CAACE,GAAD,CAAR,GAAgBD,KAAhB;AACA;AACD,KARD;AASA,WAAOD,QAAP;AACA,GAZD;;AAaAf,EAAAA,OAAO,CAACmB,MAAR,GAAiB,UAASC,IAAT,EAAe;AAC/B,QAAIC,KAAK,GAAG,UAASL,KAAT,EAAgBC,GAAhB,EAAqB;AAChCG,MAAAA,IAAI,CAACH,GAAD,CAAJ,GAAYD,KAAZ;AACA,KAFD;;AAGA,SAAK,IAAIV,CAAC,GAAG,CAAR,EAAWgB,IAAI,GAAGC,SAAS,CAACd,MAAjC,EAAyCH,CAAC,GAAGgB,IAA7C,EAAmDhB,CAAC,EAApD,EAAwD;AACvDN,MAAAA,OAAO,CAACC,IAAR,CAAasB,SAAS,CAACjB,CAAD,CAAtB,EAA2Be,KAA3B;AACA;;AACD,WAAOD,IAAP;AACA,GARD,CAxCgC,CAiDhC;;;AACApB,EAAAA,OAAO,CAACwB,WAAR,GAAsB,UAASC,KAAT,EAAgB;AACrC,QAAIL,IAAI,GAAGpB,OAAO,CAACa,KAAR,CAAcY,KAAd,CAAX;AACAzB,IAAAA,OAAO,CAACC,IAAR,CAAayB,KAAK,CAACC,SAAN,CAAgBT,KAAhB,CAAsBR,IAAtB,CAA2Ba,SAA3B,EAAsC,CAAtC,CAAb,EAAuD,UAASK,SAAT,EAAoB;AAC1E5B,MAAAA,OAAO,CAACC,IAAR,CAAa2B,SAAb,EAAwB,UAASZ,KAAT,EAAgBC,GAAhB,EAAqB;AAC5C,YAAIY,eAAe,GAAGT,IAAI,CAACU,cAAL,CAAoBb,GAApB,CAAtB;AACA,YAAIc,OAAO,GAAGF,eAAe,GAAGT,IAAI,CAACH,GAAD,CAAP,GAAe,EAA5C;;AAEA,YAAIA,GAAG,KAAK,QAAZ,EAAsB;AACrB;AACAG,UAAAA,IAAI,CAACH,GAAD,CAAJ,GAAYjB,OAAO,CAACgC,UAAR,CAAmBD,OAAnB,EAA4Bf,KAA5B,CAAZ;AACA,SAHD,MAGO,IAAIC,GAAG,KAAK,OAAZ,EAAqB;AAC3B;AACAG,UAAAA,IAAI,CAACH,GAAD,CAAJ,GAAYjB,OAAO,CAACwB,WAAR,CAAoBO,OAApB,EAA6BhC,KAAK,CAACkC,YAAN,CAAmBC,gBAAnB,CAAoClB,KAAK,CAACmB,IAA1C,CAA7B,EAA8EnB,KAA9E,CAAZ;AACA,SAHM,MAGA,IAAIa,eAAe,IACrB,OAAOE,OAAP,KAAmB,QADb,IAEN,CAAC/B,OAAO,CAACQ,OAAR,CAAgBuB,OAAhB,CAFK,IAGNA,OAAO,KAAK,IAHN,IAIN,OAAOf,KAAP,KAAiB,QAJX,IAKN,CAAChB,OAAO,CAACQ,OAAR,CAAgBQ,KAAhB,CALC,EAKuB;AAC7B;AACAI,UAAAA,IAAI,CAACH,GAAD,CAAJ,GAAYjB,OAAO,CAACwB,WAAR,CAAoBO,OAApB,EAA6Bf,KAA7B,CAAZ;AACA,SARM,MAQA;AACN;AACAI,UAAAA,IAAI,CAACH,GAAD,CAAJ,GAAYD,KAAZ;AACA;AACD,OAtBD;AAuBA,KAxBD;AA0BA,WAAOI,IAAP;AACA,GA7BD;;AA8BApB,EAAAA,OAAO,CAACgC,UAAR,GAAqB,UAASP,KAAT,EAAgBG,SAAhB,EAA2B;AAC/C,QAAIR,IAAI,GAAGpB,OAAO,CAACa,KAAR,CAAcY,KAAd,CAAX;AAEAzB,IAAAA,OAAO,CAACC,IAAR,CAAa2B,SAAb,EAAwB,UAASZ,KAAT,EAAgBC,GAAhB,EAAqB;AAC5C,UAAIA,GAAG,KAAK,OAAR,IAAmBA,GAAG,KAAK,OAA/B,EAAwC;AACvC;AACA,YAAIG,IAAI,CAACU,cAAL,CAAoBb,GAApB,CAAJ,EAA8B;AAC7BjB,UAAAA,OAAO,CAACC,IAAR,CAAae,KAAb,EAAoB,UAASoB,QAAT,EAAmBC,KAAnB,EAA0B;AAC7C,gBAAIC,QAAQ,GAAGtC,OAAO,CAACuC,iBAAR,CAA0BH,QAAQ,CAACD,IAAnC,EAAyClB,GAAG,KAAK,OAAR,GAAkB,UAAlB,GAA+B,QAAxE,CAAf;AACA,gBAAIuB,YAAY,GAAGzC,KAAK,CAACkC,YAAN,CAAmBC,gBAAnB,CAAoCI,QAApC,CAAnB;;AACA,gBAAID,KAAK,IAAIjB,IAAI,CAACH,GAAD,CAAJ,CAAUR,MAAnB,IAA6B,CAACW,IAAI,CAACH,GAAD,CAAJ,CAAUoB,KAAV,EAAiBF,IAAnD,EAAyD;AACxDf,cAAAA,IAAI,CAACH,GAAD,CAAJ,CAAUwB,IAAV,CAAezC,OAAO,CAACwB,WAAR,CAAoBgB,YAApB,EAAkCJ,QAAlC,CAAf;AACA,aAFD,MAEO,IAAIA,QAAQ,CAACD,IAAT,IAAiBC,QAAQ,CAACD,IAAT,KAAkBf,IAAI,CAACH,GAAD,CAAJ,CAAUoB,KAAV,EAAiBF,IAAxD,EAA8D;AACpE;AACAf,cAAAA,IAAI,CAACH,GAAD,CAAJ,CAAUoB,KAAV,IAAmBrC,OAAO,CAACwB,WAAR,CAAoBJ,IAAI,CAACH,GAAD,CAAJ,CAAUoB,KAAV,CAApB,EAAsCG,YAAtC,EAAoDJ,QAApD,CAAnB;AACA,aAHM,MAGA;AACN;AACAhB,cAAAA,IAAI,CAACH,GAAD,CAAJ,CAAUoB,KAAV,IAAmBrC,OAAO,CAACwB,WAAR,CAAoBJ,IAAI,CAACH,GAAD,CAAJ,CAAUoB,KAAV,CAApB,EAAsCD,QAAtC,CAAnB;AACA;AACD,WAZD;AAaA,SAdD,MAcO;AACNhB,UAAAA,IAAI,CAACH,GAAD,CAAJ,GAAY,EAAZ;AACAjB,UAAAA,OAAO,CAACC,IAAR,CAAae,KAAb,EAAoB,UAASoB,QAAT,EAAmB;AACtC,gBAAIE,QAAQ,GAAGtC,OAAO,CAACuC,iBAAR,CAA0BH,QAAQ,CAACD,IAAnC,EAAyClB,GAAG,KAAK,OAAR,GAAkB,UAAlB,GAA+B,QAAxE,CAAf;AACAG,YAAAA,IAAI,CAACH,GAAD,CAAJ,CAAUwB,IAAV,CAAezC,OAAO,CAACwB,WAAR,CAAoBzB,KAAK,CAACkC,YAAN,CAAmBC,gBAAnB,CAAoCI,QAApC,CAApB,EAAmEF,QAAnE,CAAf;AACA,WAHD;AAIA;AACD,OAvBD,MAuBO,IAAIhB,IAAI,CAACU,cAAL,CAAoBb,GAApB,KAA4B,OAAOG,IAAI,CAACH,GAAD,CAAX,KAAqB,QAAjD,IAA6DG,IAAI,CAACH,GAAD,CAAJ,KAAc,IAA3E,IAAmF,OAAOD,KAAP,KAAiB,QAAxG,EAAkH;AACxH;AACAI,QAAAA,IAAI,CAACH,GAAD,CAAJ,GAAYjB,OAAO,CAACwB,WAAR,CAAoBJ,IAAI,CAACH,GAAD,CAAxB,EAA+BD,KAA/B,CAAZ;AAEA,OAJM,MAIA;AACN;AACAI,QAAAA,IAAI,CAACH,GAAD,CAAJ,GAAYD,KAAZ;AACA;AACD,KAhCD;AAkCA,WAAOI,IAAP;AACA,GAtCD;;AAuCApB,EAAAA,OAAO,CAAC0C,wBAAR,GAAmC,UAAS1B,KAAT,EAAgBqB,KAAhB,EAAuBM,YAAvB,EAAqC;AACvE,QAAI3B,KAAK,KAAK4B,SAAV,IAAuB5B,KAAK,KAAK,IAArC,EAA2C;AAC1C,aAAO2B,YAAP;AACA;;AAED,QAAI3C,OAAO,CAACQ,OAAR,CAAgBQ,KAAhB,CAAJ,EAA4B;AAC3B,aAAOqB,KAAK,GAAGrB,KAAK,CAACP,MAAd,GAAuBO,KAAK,CAACqB,KAAD,CAA5B,GAAsCM,YAA7C;AACA;;AAED,WAAO3B,KAAP;AACA,GAVD;;AAWAhB,EAAAA,OAAO,CAACuC,iBAAR,GAA4B,UAASvB,KAAT,EAAgB2B,YAAhB,EAA8B;AACzD,WAAO3B,KAAK,KAAK4B,SAAV,GAAsBD,YAAtB,GAAqC3B,KAA5C;AACA,GAFD;;AAGAhB,EAAAA,OAAO,CAAC6C,OAAR,GAAkBnB,KAAK,CAACC,SAAN,CAAgBkB,OAAhB,GACjB,UAASC,KAAT,EAAgBC,IAAhB,EAAsB;AACrB,WAAOD,KAAK,CAACD,OAAN,CAAcE,IAAd,CAAP;AACA,GAHgB,GAIjB,UAASD,KAAT,EAAgBC,IAAhB,EAAsB;AACrB,SAAK,IAAIzC,CAAC,GAAG,CAAR,EAAWgB,IAAI,GAAGwB,KAAK,CAACrC,MAA7B,EAAqCH,CAAC,GAAGgB,IAAzC,EAA+C,EAAEhB,CAAjD,EAAoD;AACnD,UAAIwC,KAAK,CAACxC,CAAD,CAAL,KAAayC,IAAjB,EAAuB;AACtB,eAAOzC,CAAP;AACA;AACD;;AACD,WAAO,CAAC,CAAR;AACA,GAXF;;AAYAN,EAAAA,OAAO,CAACgD,KAAR,GAAgB,UAASC,UAAT,EAAqBC,cAArB,EAAqC;AACpD,QAAIlD,OAAO,CAACQ,OAAR,CAAgByC,UAAhB,KAA+BvB,KAAK,CAACC,SAAN,CAAgBwB,MAAnD,EAA2D;AAC1D,aAAOF,UAAU,CAACE,MAAX,CAAkBD,cAAlB,CAAP;AACA;;AACD,QAAIE,QAAQ,GAAG,EAAf;AAEApD,IAAAA,OAAO,CAACC,IAAR,CAAagD,UAAb,EAAyB,UAASF,IAAT,EAAe;AACvC,UAAIG,cAAc,CAACH,IAAD,CAAlB,EAA0B;AACzBK,QAAAA,QAAQ,CAACX,IAAT,CAAcM,IAAd;AACA;AACD,KAJD;AAMA,WAAOK,QAAP;AACA,GAbD;;AAcApD,EAAAA,OAAO,CAACqD,SAAR,GAAoB3B,KAAK,CAACC,SAAN,CAAgB0B,SAAhB,GACnB,UAASP,KAAT,EAAgB3C,QAAhB,EAA0BmD,KAA1B,EAAiC;AAChC,WAAOR,KAAK,CAACO,SAAN,CAAgBlD,QAAhB,EAA0BmD,KAA1B,CAAP;AACA,GAHkB,GAInB,UAASR,KAAT,EAAgB3C,QAAhB,EAA0BmD,KAA1B,EAAiC;AAChCA,IAAAA,KAAK,GAAGA,KAAK,KAAKV,SAAV,GAAqBE,KAArB,GAA6BQ,KAArC;;AACA,SAAK,IAAIhD,CAAC,GAAG,CAAR,EAAWgB,IAAI,GAAGwB,KAAK,CAACrC,MAA7B,EAAqCH,CAAC,GAAGgB,IAAzC,EAA+C,EAAEhB,CAAjD,EAAoD;AACnD,UAAIH,QAAQ,CAACO,IAAT,CAAc4C,KAAd,EAAqBR,KAAK,CAACxC,CAAD,CAA1B,EAA+BA,CAA/B,EAAkCwC,KAAlC,CAAJ,EAA8C;AAC7C,eAAOxC,CAAP;AACA;AACD;;AACD,WAAO,CAAC,CAAR;AACA,GAZF;;AAaAN,EAAAA,OAAO,CAACuD,aAAR,GAAwB,UAASC,aAAT,EAAwBN,cAAxB,EAAwCO,UAAxC,EAAoD;AAC3E;AACA,QAAIA,UAAU,KAAKb,SAAf,IAA4Ba,UAAU,KAAK,IAA/C,EAAqD;AACpDA,MAAAA,UAAU,GAAG,CAAC,CAAd;AACA;;AACD,SAAK,IAAInD,CAAC,GAAGmD,UAAU,GAAG,CAA1B,EAA6BnD,CAAC,GAAGkD,aAAa,CAAC/C,MAA/C,EAAuDH,CAAC,EAAxD,EAA4D;AAC3D,UAAIoD,WAAW,GAAGF,aAAa,CAAClD,CAAD,CAA/B;;AACA,UAAI4C,cAAc,CAACQ,WAAD,CAAlB,EAAiC;AAChC,eAAOA,WAAP;AACA;AACD;AACD,GAXD;;AAYA1D,EAAAA,OAAO,CAAC2D,iBAAR,GAA4B,UAASH,aAAT,EAAwBN,cAAxB,EAAwCO,UAAxC,EAAoD;AAC/E;AACA,QAAIA,UAAU,KAAKb,SAAf,IAA4Ba,UAAU,KAAK,IAA/C,EAAqD;AACpDA,MAAAA,UAAU,GAAGD,aAAa,CAAC/C,MAA3B;AACA;;AACD,SAAK,IAAIH,CAAC,GAAGmD,UAAU,GAAG,CAA1B,EAA6BnD,CAAC,IAAI,CAAlC,EAAqCA,CAAC,EAAtC,EAA0C;AACzC,UAAIoD,WAAW,GAAGF,aAAa,CAAClD,CAAD,CAA/B;;AACA,UAAI4C,cAAc,CAACQ,WAAD,CAAlB,EAAiC;AAChC,eAAOA,WAAP;AACA;AACD;AACD,GAXD;;AAYA1D,EAAAA,OAAO,CAAC4D,QAAR,GAAmB,UAASC,UAAT,EAAqB;AACvC;AACA,QAAIC,EAAE,GAAG,IAAT;AACA,QAAIC,YAAY,GAAIF,UAAU,IAAIA,UAAU,CAAC/B,cAAX,CAA0B,aAA1B,CAAf,GAA2D+B,UAAU,CAACG,WAAtE,GAAoF,YAAW;AACjH,aAAOF,EAAE,CAACG,KAAH,CAAS,IAAT,EAAe1C,SAAf,CAAP;AACA,KAFD;;AAIA,QAAI2C,SAAS,GAAG,YAAW;AAC1B,WAAKF,WAAL,GAAmBD,YAAnB;AACA,KAFD;;AAGAG,IAAAA,SAAS,CAACvC,SAAV,GAAsBmC,EAAE,CAACnC,SAAzB;AACAoC,IAAAA,YAAY,CAACpC,SAAb,GAAyB,IAAIuC,SAAJ,EAAzB;AAEAH,IAAAA,YAAY,CAAC5C,MAAb,GAAsBnB,OAAO,CAAC4D,QAA9B;;AAEA,QAAIC,UAAJ,EAAgB;AACf7D,MAAAA,OAAO,CAACmB,MAAR,CAAe4C,YAAY,CAACpC,SAA5B,EAAuCkC,UAAvC;AACA;;AAEDE,IAAAA,YAAY,CAACI,SAAb,GAAyBL,EAAE,CAACnC,SAA5B;AAEA,WAAOoC,YAAP;AACA,GAtBD;;AAuBA/D,EAAAA,OAAO,CAACoE,IAAR,GAAe,YAAW,CAAE,CAA5B;;AACApE,EAAAA,OAAO,CAACqE,GAAR,GAAe,YAAW;AACzB,QAAIC,EAAE,GAAG,CAAT;AACA,WAAO,YAAW;AACjB,aAAOA,EAAE,EAAT;AACA,KAFD;AAGA,GALc,EAAf,CA5NgC,CAkOhC;;;AACAtE,EAAAA,OAAO,CAACuE,QAAR,GAAmB,UAASC,CAAT,EAAY;AAC9B,WAAO,CAACC,KAAK,CAACC,UAAU,CAACF,CAAD,CAAX,CAAN,IAAyBG,QAAQ,CAACH,CAAD,CAAxC;AACA,GAFD;;AAGAxE,EAAAA,OAAO,CAAC4E,YAAR,GAAuB,UAASC,CAAT,EAAYC,CAAZ,EAAeC,OAAf,EAAwB;AAC9C,WAAOC,IAAI,CAACC,GAAL,CAASJ,CAAC,GAAGC,CAAb,IAAkBC,OAAzB;AACA,GAFD;;AAGA/E,EAAAA,OAAO,CAACkF,WAAR,GAAsB,UAASL,CAAT,EAAYE,OAAZ,EAAqB;AAC1C,QAAII,OAAO,GAAGH,IAAI,CAACI,KAAL,CAAWP,CAAX,CAAd;AACA,WAAUM,OAAO,GAAGJ,OAAX,GAAsBF,CAAvB,IAA+BM,OAAO,GAAGJ,OAAX,GAAsBF,CAA5D;AACA,GAHD;;AAIA7E,EAAAA,OAAO,CAACqF,GAAR,GAAc,UAASvC,KAAT,EAAgB;AAC7B,WAAOA,KAAK,CAACwC,MAAN,CAAa,UAASD,GAAT,EAAcrE,KAAd,EAAqB;AACxC,UAAI,CAACyD,KAAK,CAACzD,KAAD,CAAV,EAAmB;AAClB,eAAOgE,IAAI,CAACK,GAAL,CAASA,GAAT,EAAcrE,KAAd,CAAP;AACA;;AACD,aAAOqE,GAAP;AACA,KALM,EAKJE,MAAM,CAACC,iBALH,CAAP;AAMA,GAPD;;AAQAxF,EAAAA,OAAO,CAACyF,GAAR,GAAc,UAAS3C,KAAT,EAAgB;AAC7B,WAAOA,KAAK,CAACwC,MAAN,CAAa,UAASG,GAAT,EAAczE,KAAd,EAAqB;AACxC,UAAI,CAACyD,KAAK,CAACzD,KAAD,CAAV,EAAmB;AAClB,eAAOgE,IAAI,CAACS,GAAL,CAASA,GAAT,EAAczE,KAAd,CAAP;AACA;;AACD,aAAOyE,GAAP;AACA,KALM,EAKJF,MAAM,CAACG,iBALH,CAAP;AAMA,GAPD;;AAQA1F,EAAAA,OAAO,CAAC2F,IAAR,GAAeX,IAAI,CAACW,IAAL,GACd,UAASd,CAAT,EAAY;AACX,WAAOG,IAAI,CAACW,IAAL,CAAUd,CAAV,CAAP;AACA,GAHa,GAId,UAASA,CAAT,EAAY;AACXA,IAAAA,CAAC,GAAG,CAACA,CAAL,CADW,CACH;;AACR,QAAIA,CAAC,KAAK,CAAN,IAAWJ,KAAK,CAACI,CAAD,CAApB,EAAyB;AACxB,aAAOA,CAAP;AACA;;AACD,WAAOA,CAAC,GAAG,CAAJ,GAAQ,CAAR,GAAY,CAAC,CAApB;AACA,GAVF;AAWA7E,EAAAA,OAAO,CAAC4F,KAAR,GAAgBZ,IAAI,CAACY,KAAL,GACf,UAASf,CAAT,EAAY;AACX,WAAOG,IAAI,CAACY,KAAL,CAAWf,CAAX,CAAP;AACA,GAHc,GAIf,UAASA,CAAT,EAAY;AACX,WAAOG,IAAI,CAACa,GAAL,CAAShB,CAAT,IAAcG,IAAI,CAACc,IAA1B;AACA,GANF;;AAOA9F,EAAAA,OAAO,CAAC+F,SAAR,GAAoB,UAASC,OAAT,EAAkB;AACrC,WAAOA,OAAO,IAAIhB,IAAI,CAACiB,EAAL,GAAU,GAAd,CAAd;AACA,GAFD;;AAGAjG,EAAAA,OAAO,CAACkG,SAAR,GAAoB,UAASC,OAAT,EAAkB;AACrC,WAAOA,OAAO,IAAI,MAAMnB,IAAI,CAACiB,EAAf,CAAd;AACA,GAFD,CAlRgC,CAqRhC;;;AACAjG,EAAAA,OAAO,CAACoG,iBAAR,GAA4B,UAASC,WAAT,EAAsBC,UAAtB,EAAkC;AAC7D,QAAIC,mBAAmB,GAAGD,UAAU,CAACzB,CAAX,GAAewB,WAAW,CAACxB,CAArD;AAAA,QACC2B,mBAAmB,GAAGF,UAAU,CAACxB,CAAX,GAAeuB,WAAW,CAACvB,CADlD;AAAA,QAEC2B,wBAAwB,GAAGzB,IAAI,CAAC0B,IAAL,CAAUH,mBAAmB,GAAGA,mBAAtB,GAA4CC,mBAAmB,GAAGA,mBAA5E,CAF5B;AAIA,QAAIG,KAAK,GAAG3B,IAAI,CAAC4B,KAAL,CAAWJ,mBAAX,EAAgCD,mBAAhC,CAAZ;;AAEA,QAAII,KAAK,GAAI,CAAC,GAAD,GAAO3B,IAAI,CAACiB,EAAzB,EAA8B;AAC7BU,MAAAA,KAAK,IAAI,MAAM3B,IAAI,CAACiB,EAApB,CAD6B,CACL;AACxB;;AAED,WAAO;AACNU,MAAAA,KAAK,EAAEA,KADD;AAENE,MAAAA,QAAQ,EAAEJ;AAFJ,KAAP;AAIA,GAfD;;AAgBAzG,EAAAA,OAAO,CAAC8G,qBAAR,GAAgC,UAASC,GAAT,EAAcC,GAAd,EAAmB;AAClD,WAAOhC,IAAI,CAAC0B,IAAL,CAAU1B,IAAI,CAACiC,GAAL,CAASD,GAAG,CAACnC,CAAJ,GAAQkC,GAAG,CAAClC,CAArB,EAAwB,CAAxB,IAA6BG,IAAI,CAACiC,GAAL,CAASD,GAAG,CAAClC,CAAJ,GAAQiC,GAAG,CAACjC,CAArB,EAAwB,CAAxB,CAAvC,CAAP;AACA,GAFD;;AAGA9E,EAAAA,OAAO,CAACkH,UAAR,GAAqB,UAASC,UAAT,EAAqB;AACzC,WAAQA,UAAU,GAAG,CAAb,KAAmB,CAApB,GAAyB,CAAzB,GAA6B,GAApC;AACA,GAFD;;AAGAnH,EAAAA,OAAO,CAACoH,WAAR,GAAsB,UAASC,UAAT,EAAqBC,WAArB,EAAkCC,UAAlC,EAA8CC,CAA9C,EAAiD;AACtE;AACA;AAEA;AAEA,QAAIC,QAAQ,GAAGJ,UAAU,CAACK,IAAX,GAAkBJ,WAAlB,GAAgCD,UAA/C;AAAA,QACCM,OAAO,GAAGL,WADX;AAAA,QAECM,IAAI,GAAGL,UAAU,CAACG,IAAX,GAAkBJ,WAAlB,GAAgCC,UAFxC;AAIA,QAAIM,GAAG,GAAG7C,IAAI,CAAC0B,IAAL,CAAU1B,IAAI,CAACiC,GAAL,CAASU,OAAO,CAAC9C,CAAR,GAAY4C,QAAQ,CAAC5C,CAA9B,EAAiC,CAAjC,IAAsCG,IAAI,CAACiC,GAAL,CAASU,OAAO,CAAC7C,CAAR,GAAY2C,QAAQ,CAAC3C,CAA9B,EAAiC,CAAjC,CAAhD,CAAV;AACA,QAAIgD,GAAG,GAAG9C,IAAI,CAAC0B,IAAL,CAAU1B,IAAI,CAACiC,GAAL,CAASW,IAAI,CAAC/C,CAAL,GAAS8C,OAAO,CAAC9C,CAA1B,EAA6B,CAA7B,IAAkCG,IAAI,CAACiC,GAAL,CAASW,IAAI,CAAC9C,CAAL,GAAS6C,OAAO,CAAC7C,CAA1B,EAA6B,CAA7B,CAA5C,CAAV;AAEA,QAAIiD,GAAG,GAAGF,GAAG,IAAIA,GAAG,GAAGC,GAAV,CAAb;AACA,QAAIE,GAAG,GAAGF,GAAG,IAAID,GAAG,GAAGC,GAAV,CAAb,CAdsE,CAgBtE;;AACAC,IAAAA,GAAG,GAAGtD,KAAK,CAACsD,GAAD,CAAL,GAAa,CAAb,GAAiBA,GAAvB;AACAC,IAAAA,GAAG,GAAGvD,KAAK,CAACuD,GAAD,CAAL,GAAa,CAAb,GAAiBA,GAAvB;AAEA,QAAIC,EAAE,GAAGT,CAAC,GAAGO,GAAb,CApBsE,CAoBpD;;AAClB,QAAIG,EAAE,GAAGV,CAAC,GAAGQ,GAAb;AAEA,WAAO;AACNP,MAAAA,QAAQ,EAAE;AACT5C,QAAAA,CAAC,EAAE8C,OAAO,CAAC9C,CAAR,GAAYoD,EAAE,IAAIL,IAAI,CAAC/C,CAAL,GAAS4C,QAAQ,CAAC5C,CAAtB,CADR;AAETC,QAAAA,CAAC,EAAE6C,OAAO,CAAC7C,CAAR,GAAYmD,EAAE,IAAIL,IAAI,CAAC9C,CAAL,GAAS2C,QAAQ,CAAC3C,CAAtB;AAFR,OADJ;AAKN8C,MAAAA,IAAI,EAAE;AACL/C,QAAAA,CAAC,EAAE8C,OAAO,CAAC9C,CAAR,GAAYqD,EAAE,IAAIN,IAAI,CAAC/C,CAAL,GAAS4C,QAAQ,CAAC5C,CAAtB,CADZ;AAELC,QAAAA,CAAC,EAAE6C,OAAO,CAAC7C,CAAR,GAAYoD,EAAE,IAAIN,IAAI,CAAC9C,CAAL,GAAS2C,QAAQ,CAAC3C,CAAtB;AAFZ;AALA,KAAP;AAUA,GAjCD;;AAkCA9E,EAAAA,OAAO,CAACmI,OAAR,GAAkB5C,MAAM,CAAC4C,OAAP,IAAkB,KAApC;;AACAnI,EAAAA,OAAO,CAACoI,mBAAR,GAA8B,UAASC,MAAT,EAAiB;AAC9C;AACA;AACA;AACA;AAEA,QAAIC,kBAAkB,GAAG,CAACD,MAAM,IAAI,EAAX,EAAeE,GAAf,CAAmB,UAASC,KAAT,EAAgB;AAC3D,aAAO;AACNC,QAAAA,KAAK,EAAED,KAAK,CAACE,MADP;AAENC,QAAAA,MAAM,EAAE,CAFF;AAGNC,QAAAA,EAAE,EAAE;AAHE,OAAP;AAKA,KANwB,CAAzB,CAN8C,CAc9C;;AACA,QAAIC,SAAS,GAAGP,kBAAkB,CAAC7H,MAAnC;AACA,QAAIH,CAAJ,EAAOwI,WAAP,EAAoBC,YAApB,EAAkCC,UAAlC;;AACA,SAAK1I,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGuI,SAAhB,EAA2B,EAAEvI,CAA7B,EAAgC;AAC/ByI,MAAAA,YAAY,GAAGT,kBAAkB,CAAChI,CAAD,CAAjC;;AACA,UAAIyI,YAAY,CAACN,KAAb,CAAmBf,IAAvB,EAA6B;AAC5B;AACA;;AAEDoB,MAAAA,WAAW,GAAGxI,CAAC,GAAG,CAAJ,GAAQgI,kBAAkB,CAAChI,CAAC,GAAG,CAAL,CAA1B,GAAoC,IAAlD;AACA0I,MAAAA,UAAU,GAAG1I,CAAC,GAAGuI,SAAS,GAAG,CAAhB,GAAoBP,kBAAkB,CAAChI,CAAC,GAAG,CAAL,CAAtC,GAAgD,IAA7D;;AACA,UAAI0I,UAAU,IAAI,CAACA,UAAU,CAACP,KAAX,CAAiBf,IAApC,EAA0C;AACzC,YAAIuB,WAAW,GAAID,UAAU,CAACP,KAAX,CAAiB5D,CAAjB,GAAqBkE,YAAY,CAACN,KAAb,CAAmB5D,CAA3D,CADyC,CAGzC;;AACAkE,QAAAA,YAAY,CAACJ,MAAb,GAAsBM,WAAW,KAAK,CAAhB,GAAoB,CAACD,UAAU,CAACP,KAAX,CAAiB3D,CAAjB,GAAqBiE,YAAY,CAACN,KAAb,CAAmB3D,CAAzC,IAA8CmE,WAAlE,GAAgF,CAAtG;AACA;;AAED,UAAI,CAACH,WAAD,IAAgBA,WAAW,CAACL,KAAZ,CAAkBf,IAAtC,EAA4C;AAC3CqB,QAAAA,YAAY,CAACH,EAAb,GAAkBG,YAAY,CAACJ,MAA/B;AACA,OAFD,MAEO,IAAI,CAACK,UAAD,IAAeA,UAAU,CAACP,KAAX,CAAiBf,IAApC,EAA0C;AAChDqB,QAAAA,YAAY,CAACH,EAAb,GAAkBE,WAAW,CAACH,MAA9B;AACA,OAFM,MAEA,IAAI,KAAKhD,IAAL,CAAUmD,WAAW,CAACH,MAAtB,MAAkC,KAAKhD,IAAL,CAAUoD,YAAY,CAACJ,MAAvB,CAAtC,EAAsE;AAC5EI,QAAAA,YAAY,CAACH,EAAb,GAAkB,CAAlB;AACA,OAFM,MAEA;AACNG,QAAAA,YAAY,CAACH,EAAb,GAAkB,CAACE,WAAW,CAACH,MAAZ,GAAqBI,YAAY,CAACJ,MAAnC,IAA6C,CAA/D;AACA;AACD,KAzC6C,CA2C9C;;;AACA,QAAIO,MAAJ,EAAYC,KAAZ,EAAmBC,IAAnB,EAAyBC,gBAAzB;;AACA,SAAK/I,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGuI,SAAS,GAAG,CAA5B,EAA+B,EAAEvI,CAAjC,EAAoC;AACnCyI,MAAAA,YAAY,GAAGT,kBAAkB,CAAChI,CAAD,CAAjC;AACA0I,MAAAA,UAAU,GAAGV,kBAAkB,CAAChI,CAAC,GAAG,CAAL,CAA/B;;AACA,UAAIyI,YAAY,CAACN,KAAb,CAAmBf,IAAnB,IAA2BsB,UAAU,CAACP,KAAX,CAAiBf,IAAhD,EAAsD;AACrD;AACA;;AAED,UAAI1H,OAAO,CAAC4E,YAAR,CAAqBmE,YAAY,CAACJ,MAAlC,EAA0C,CAA1C,EAA6C,KAAKR,OAAlD,CAAJ,EAAgE;AAC/DY,QAAAA,YAAY,CAACH,EAAb,GAAkBI,UAAU,CAACJ,EAAX,GAAgB,CAAlC;AACA;AACA;;AAEDM,MAAAA,MAAM,GAAGH,YAAY,CAACH,EAAb,GAAkBG,YAAY,CAACJ,MAAxC;AACAQ,MAAAA,KAAK,GAAGH,UAAU,CAACJ,EAAX,GAAgBG,YAAY,CAACJ,MAArC;AACAU,MAAAA,gBAAgB,GAAGrE,IAAI,CAACiC,GAAL,CAASiC,MAAT,EAAiB,CAAjB,IAAsBlE,IAAI,CAACiC,GAAL,CAASkC,KAAT,EAAgB,CAAhB,CAAzC;;AACA,UAAIE,gBAAgB,IAAI,CAAxB,EAA2B;AAC1B;AACA;;AAEDD,MAAAA,IAAI,GAAG,IAAIpE,IAAI,CAAC0B,IAAL,CAAU2C,gBAAV,CAAX;AACAN,MAAAA,YAAY,CAACH,EAAb,GAAkBM,MAAM,GAAGE,IAAT,GAAgBL,YAAY,CAACJ,MAA/C;AACAK,MAAAA,UAAU,CAACJ,EAAX,GAAgBO,KAAK,GAAGC,IAAR,GAAeL,YAAY,CAACJ,MAA5C;AACA,KAnE6C,CAqE9C;;;AACA,QAAIW,MAAJ;;AACA,SAAKhJ,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGuI,SAAhB,EAA2B,EAAEvI,CAA7B,EAAgC;AAC/ByI,MAAAA,YAAY,GAAGT,kBAAkB,CAAChI,CAAD,CAAjC;;AACA,UAAIyI,YAAY,CAACN,KAAb,CAAmBf,IAAvB,EAA6B;AAC5B;AACA;;AAEDoB,MAAAA,WAAW,GAAGxI,CAAC,GAAG,CAAJ,GAAQgI,kBAAkB,CAAChI,CAAC,GAAG,CAAL,CAA1B,GAAoC,IAAlD;AACA0I,MAAAA,UAAU,GAAG1I,CAAC,GAAGuI,SAAS,GAAG,CAAhB,GAAoBP,kBAAkB,CAAChI,CAAC,GAAG,CAAL,CAAtC,GAAgD,IAA7D;;AACA,UAAIwI,WAAW,IAAI,CAACA,WAAW,CAACL,KAAZ,CAAkBf,IAAtC,EAA4C;AAC3C4B,QAAAA,MAAM,GAAG,CAACP,YAAY,CAACN,KAAb,CAAmB5D,CAAnB,GAAuBiE,WAAW,CAACL,KAAZ,CAAkB5D,CAA1C,IAA+C,CAAxD;AACAkE,QAAAA,YAAY,CAACN,KAAb,CAAmBc,qBAAnB,GAA2CR,YAAY,CAACN,KAAb,CAAmB5D,CAAnB,GAAuByE,MAAlE;AACAP,QAAAA,YAAY,CAACN,KAAb,CAAmBe,qBAAnB,GAA2CT,YAAY,CAACN,KAAb,CAAmB3D,CAAnB,GAAuBwE,MAAM,GAAGP,YAAY,CAACH,EAAxF;AACA;;AACD,UAAII,UAAU,IAAI,CAACA,UAAU,CAACP,KAAX,CAAiBf,IAApC,EAA0C;AACzC4B,QAAAA,MAAM,GAAG,CAACN,UAAU,CAACP,KAAX,CAAiB5D,CAAjB,GAAqBkE,YAAY,CAACN,KAAb,CAAmB5D,CAAzC,IAA8C,CAAvD;AACAkE,QAAAA,YAAY,CAACN,KAAb,CAAmBgB,iBAAnB,GAAuCV,YAAY,CAACN,KAAb,CAAmB5D,CAAnB,GAAuByE,MAA9D;AACAP,QAAAA,YAAY,CAACN,KAAb,CAAmBiB,iBAAnB,GAAuCX,YAAY,CAACN,KAAb,CAAmB3D,CAAnB,GAAuBwE,MAAM,GAAGP,YAAY,CAACH,EAApF;AACA;AACD;AACD,GA1FD;;AA2FA5I,EAAAA,OAAO,CAAC2J,QAAR,GAAmB,UAAS1G,UAAT,EAAqBZ,KAArB,EAA4BuH,IAA5B,EAAkC;AACpD,QAAIA,IAAJ,EAAU;AACT,aAAOvH,KAAK,IAAIY,UAAU,CAACxC,MAAX,GAAoB,CAA7B,GAAiCwC,UAAU,CAAC,CAAD,CAA3C,GAAiDA,UAAU,CAACZ,KAAK,GAAG,CAAT,CAAlE;AACA;;AACD,WAAOA,KAAK,IAAIY,UAAU,CAACxC,MAAX,GAAoB,CAA7B,GAAiCwC,UAAU,CAACA,UAAU,CAACxC,MAAX,GAAoB,CAArB,CAA3C,GAAqEwC,UAAU,CAACZ,KAAK,GAAG,CAAT,CAAtF;AACA,GALD;;AAMArC,EAAAA,OAAO,CAAC6J,YAAR,GAAuB,UAAS5G,UAAT,EAAqBZ,KAArB,EAA4BuH,IAA5B,EAAkC;AACxD,QAAIA,IAAJ,EAAU;AACT,aAAOvH,KAAK,IAAI,CAAT,GAAaY,UAAU,CAACA,UAAU,CAACxC,MAAX,GAAoB,CAArB,CAAvB,GAAiDwC,UAAU,CAACZ,KAAK,GAAG,CAAT,CAAlE;AACA;;AACD,WAAOA,KAAK,IAAI,CAAT,GAAaY,UAAU,CAAC,CAAD,CAAvB,GAA6BA,UAAU,CAACZ,KAAK,GAAG,CAAT,CAA9C;AACA,GALD,CAhbgC,CAsbhC;;;AACArC,EAAAA,OAAO,CAAC8J,OAAR,GAAkB,UAASC,KAAT,EAAgB3E,KAAhB,EAAuB;AACxC,QAAI4E,QAAQ,GAAGhF,IAAI,CAACiF,KAAL,CAAWjK,OAAO,CAAC4F,KAAR,CAAcmE,KAAd,CAAX,CAAf;AACA,QAAIG,QAAQ,GAAGH,KAAK,GAAG/E,IAAI,CAACiC,GAAL,CAAS,EAAT,EAAa+C,QAAb,CAAvB;AACA,QAAIG,YAAJ;;AAEA,QAAI/E,KAAJ,EAAW;AACV,UAAI8E,QAAQ,GAAG,GAAf,EAAoB;AACnBC,QAAAA,YAAY,GAAG,CAAf;AACA,OAFD,MAEO,IAAID,QAAQ,GAAG,CAAf,EAAkB;AACxBC,QAAAA,YAAY,GAAG,CAAf;AACA,OAFM,MAEA,IAAID,QAAQ,GAAG,CAAf,EAAkB;AACxBC,QAAAA,YAAY,GAAG,CAAf;AACA,OAFM,MAEA;AACNA,QAAAA,YAAY,GAAG,EAAf;AACA;AACD,KAVD,MAUO,IAAID,QAAQ,IAAI,GAAhB,EAAqB;AAC3BC,MAAAA,YAAY,GAAG,CAAf;AACA,KAFM,MAEA,IAAID,QAAQ,IAAI,CAAhB,EAAmB;AACzBC,MAAAA,YAAY,GAAG,CAAf;AACA,KAFM,MAEA,IAAID,QAAQ,IAAI,CAAhB,EAAmB;AACzBC,MAAAA,YAAY,GAAG,CAAf;AACA,KAFM,MAEA;AACNA,MAAAA,YAAY,GAAG,EAAf;AACA;;AAED,WAAOA,YAAY,GAAGnF,IAAI,CAACiC,GAAL,CAAS,EAAT,EAAa+C,QAAb,CAAtB;AACA,GA1BD,CAvbgC,CAkdhC;AACA;;;AACA,MAAII,aAAa,GAAGpK,OAAO,CAACoK,aAAR,GAAwB;AAC3CC,IAAAA,MAAM,EAAE,UAAS7C,CAAT,EAAY;AACnB,aAAOA,CAAP;AACA,KAH0C;AAI3C8C,IAAAA,UAAU,EAAE,UAAS9C,CAAT,EAAY;AACvB,aAAOA,CAAC,GAAGA,CAAX;AACA,KAN0C;AAO3C+C,IAAAA,WAAW,EAAE,UAAS/C,CAAT,EAAY;AACxB,aAAO,CAAC,CAAD,GAAKA,CAAL,IAAUA,CAAC,GAAG,CAAd,CAAP;AACA,KAT0C;AAU3CgD,IAAAA,aAAa,EAAE,UAAShD,CAAT,EAAY;AAC1B,UAAI,CAACA,CAAC,IAAI,IAAI,CAAV,IAAe,CAAnB,EAAsB;AACrB,eAAO,IAAI,CAAJ,GAAQA,CAAR,GAAYA,CAAnB;AACA;;AACD,aAAO,CAAC,CAAD,GAAK,CAAL,IAAW,EAAEA,CAAH,IAASA,CAAC,GAAG,CAAb,IAAkB,CAA5B,CAAP;AACA,KAf0C;AAgB3CiD,IAAAA,WAAW,EAAE,UAASjD,CAAT,EAAY;AACxB,aAAOA,CAAC,GAAGA,CAAJ,GAAQA,CAAf;AACA,KAlB0C;AAmB3CkD,IAAAA,YAAY,EAAE,UAASlD,CAAT,EAAY;AACzB,aAAO,KAAK,CAACA,CAAC,GAAGA,CAAC,GAAG,CAAJ,GAAQ,CAAb,IAAkBA,CAAlB,GAAsBA,CAAtB,GAA0B,CAA/B,CAAP;AACA,KArB0C;AAsB3CmD,IAAAA,cAAc,EAAE,UAASnD,CAAT,EAAY;AAC3B,UAAI,CAACA,CAAC,IAAI,IAAI,CAAV,IAAe,CAAnB,EAAsB;AACrB,eAAO,IAAI,CAAJ,GAAQA,CAAR,GAAYA,CAAZ,GAAgBA,CAAvB;AACA;;AACD,aAAO,IAAI,CAAJ,IAAS,CAACA,CAAC,IAAI,CAAN,IAAWA,CAAX,GAAeA,CAAf,GAAmB,CAA5B,CAAP;AACA,KA3B0C;AA4B3CoD,IAAAA,WAAW,EAAE,UAASpD,CAAT,EAAY;AACxB,aAAOA,CAAC,GAAGA,CAAJ,GAAQA,CAAR,GAAYA,CAAnB;AACA,KA9B0C;AA+B3CqD,IAAAA,YAAY,EAAE,UAASrD,CAAT,EAAY;AACzB,aAAO,CAAC,CAAD,IAAM,CAACA,CAAC,GAAGA,CAAC,GAAG,CAAJ,GAAQ,CAAb,IAAkBA,CAAlB,GAAsBA,CAAtB,GAA0BA,CAA1B,GAA8B,CAApC,CAAP;AACA,KAjC0C;AAkC3CsD,IAAAA,cAAc,EAAE,UAAStD,CAAT,EAAY;AAC3B,UAAI,CAACA,CAAC,IAAI,IAAI,CAAV,IAAe,CAAnB,EAAsB;AACrB,eAAO,IAAI,CAAJ,GAAQA,CAAR,GAAYA,CAAZ,GAAgBA,CAAhB,GAAoBA,CAA3B;AACA;;AACD,aAAO,CAAC,CAAD,GAAK,CAAL,IAAU,CAACA,CAAC,IAAI,CAAN,IAAWA,CAAX,GAAeA,CAAf,GAAmBA,CAAnB,GAAuB,CAAjC,CAAP;AACA,KAvC0C;AAwC3CuD,IAAAA,WAAW,EAAE,UAASvD,CAAT,EAAY;AACxB,aAAO,KAAKA,CAAC,IAAI,CAAV,IAAeA,CAAf,GAAmBA,CAAnB,GAAuBA,CAAvB,GAA2BA,CAAlC;AACA,KA1C0C;AA2C3CwD,IAAAA,YAAY,EAAE,UAASxD,CAAT,EAAY;AACzB,aAAO,KAAK,CAACA,CAAC,GAAGA,CAAC,GAAG,CAAJ,GAAQ,CAAb,IAAkBA,CAAlB,GAAsBA,CAAtB,GAA0BA,CAA1B,GAA8BA,CAA9B,GAAkC,CAAvC,CAAP;AACA,KA7C0C;AA8C3CyD,IAAAA,cAAc,EAAE,UAASzD,CAAT,EAAY;AAC3B,UAAI,CAACA,CAAC,IAAI,IAAI,CAAV,IAAe,CAAnB,EAAsB;AACrB,eAAO,IAAI,CAAJ,GAAQA,CAAR,GAAYA,CAAZ,GAAgBA,CAAhB,GAAoBA,CAApB,GAAwBA,CAA/B;AACA;;AACD,aAAO,IAAI,CAAJ,IAAS,CAACA,CAAC,IAAI,CAAN,IAAWA,CAAX,GAAeA,CAAf,GAAmBA,CAAnB,GAAuBA,CAAvB,GAA2B,CAApC,CAAP;AACA,KAnD0C;AAoD3C0D,IAAAA,UAAU,EAAE,UAAS1D,CAAT,EAAY;AACvB,aAAO,CAAC,CAAD,GAAKxC,IAAI,CAACmG,GAAL,CAAS3D,CAAC,GAAG,CAAJ,IAASxC,IAAI,CAACiB,EAAL,GAAU,CAAnB,CAAT,CAAL,GAAuC,CAA9C;AACA,KAtD0C;AAuD3CmF,IAAAA,WAAW,EAAE,UAAS5D,CAAT,EAAY;AACxB,aAAO,IAAIxC,IAAI,CAACqG,GAAL,CAAS7D,CAAC,GAAG,CAAJ,IAASxC,IAAI,CAACiB,EAAL,GAAU,CAAnB,CAAT,CAAX;AACA,KAzD0C;AA0D3CqF,IAAAA,aAAa,EAAE,UAAS9D,CAAT,EAAY;AAC1B,aAAO,CAAC,CAAD,GAAK,CAAL,IAAUxC,IAAI,CAACmG,GAAL,CAASnG,IAAI,CAACiB,EAAL,GAAUuB,CAAV,GAAc,CAAvB,IAA4B,CAAtC,CAAP;AACA,KA5D0C;AA6D3C+D,IAAAA,UAAU,EAAE,UAAS/D,CAAT,EAAY;AACvB,aAAQA,CAAC,KAAK,CAAP,GAAY,CAAZ,GAAgB,IAAIxC,IAAI,CAACiC,GAAL,CAAS,CAAT,EAAY,MAAMO,CAAC,GAAG,CAAJ,GAAQ,CAAd,CAAZ,CAA3B;AACA,KA/D0C;AAgE3CgE,IAAAA,WAAW,EAAE,UAAShE,CAAT,EAAY;AACxB,aAAQA,CAAC,KAAK,CAAP,GAAY,CAAZ,GAAgB,KAAK,CAACxC,IAAI,CAACiC,GAAL,CAAS,CAAT,EAAY,CAAC,EAAD,GAAMO,CAAN,GAAU,CAAtB,CAAD,GAA4B,CAAjC,CAAvB;AACA,KAlE0C;AAmE3CiE,IAAAA,aAAa,EAAE,UAASjE,CAAT,EAAY;AAC1B,UAAIA,CAAC,KAAK,CAAV,EAAa;AACZ,eAAO,CAAP;AACA;;AACD,UAAIA,CAAC,KAAK,CAAV,EAAa;AACZ,eAAO,CAAP;AACA;;AACD,UAAI,CAACA,CAAC,IAAI,IAAI,CAAV,IAAe,CAAnB,EAAsB;AACrB,eAAO,IAAI,CAAJ,GAAQxC,IAAI,CAACiC,GAAL,CAAS,CAAT,EAAY,MAAMO,CAAC,GAAG,CAAV,CAAZ,CAAf;AACA;;AACD,aAAO,IAAI,CAAJ,IAAS,CAACxC,IAAI,CAACiC,GAAL,CAAS,CAAT,EAAY,CAAC,EAAD,GAAM,EAAEO,CAApB,CAAD,GAA0B,CAAnC,CAAP;AACA,KA9E0C;AA+E3CkE,IAAAA,UAAU,EAAE,UAASlE,CAAT,EAAY;AACvB,UAAIA,CAAC,IAAI,CAAT,EAAY;AACX,eAAOA,CAAP;AACA;;AACD,aAAO,CAAC,CAAD,IAAMxC,IAAI,CAAC0B,IAAL,CAAU,IAAI,CAACc,CAAC,IAAI,CAAN,IAAWA,CAAzB,IAA8B,CAApC,CAAP;AACA,KApF0C;AAqF3CmE,IAAAA,WAAW,EAAE,UAASnE,CAAT,EAAY;AACxB,aAAO,IAAIxC,IAAI,CAAC0B,IAAL,CAAU,IAAI,CAACc,CAAC,GAAGA,CAAC,GAAG,CAAJ,GAAQ,CAAb,IAAkBA,CAAhC,CAAX;AACA,KAvF0C;AAwF3CoE,IAAAA,aAAa,EAAE,UAASpE,CAAT,EAAY;AAC1B,UAAI,CAACA,CAAC,IAAI,IAAI,CAAV,IAAe,CAAnB,EAAsB;AACrB,eAAO,CAAC,CAAD,GAAK,CAAL,IAAUxC,IAAI,CAAC0B,IAAL,CAAU,IAAIc,CAAC,GAAGA,CAAlB,IAAuB,CAAjC,CAAP;AACA;;AACD,aAAO,IAAI,CAAJ,IAASxC,IAAI,CAAC0B,IAAL,CAAU,IAAI,CAACc,CAAC,IAAI,CAAN,IAAWA,CAAzB,IAA8B,CAAvC,CAAP;AACA,KA7F0C;AA8F3CqE,IAAAA,aAAa,EAAE,UAASrE,CAAT,EAAY;AAC1B,UAAIsE,CAAC,GAAG,OAAR;AACA,UAAIC,CAAC,GAAG,CAAR;AACA,UAAIC,CAAC,GAAG,CAAR;;AACA,UAAIxE,CAAC,KAAK,CAAV,EAAa;AACZ,eAAO,CAAP;AACA;;AACD,UAAI,CAACA,CAAC,IAAI,CAAN,MAAa,CAAjB,EAAoB;AACnB,eAAO,CAAP;AACA;;AACD,UAAI,CAACuE,CAAL,EAAQ;AACPA,QAAAA,CAAC,GAAG,IAAI,GAAR;AACA;;AACD,UAAIC,CAAC,GAAGhH,IAAI,CAACC,GAAL,CAAS,CAAT,CAAR,EAAqB;AACpB+G,QAAAA,CAAC,GAAG,CAAJ;AACAF,QAAAA,CAAC,GAAGC,CAAC,GAAG,CAAR;AACA,OAHD,MAGO;AACND,QAAAA,CAAC,GAAGC,CAAC,IAAI,IAAI/G,IAAI,CAACiB,EAAb,CAAD,GAAoBjB,IAAI,CAACiH,IAAL,CAAU,IAAID,CAAd,CAAxB;AACA;;AACD,aAAO,EAAEA,CAAC,GAAGhH,IAAI,CAACiC,GAAL,CAAS,CAAT,EAAY,MAAMO,CAAC,IAAI,CAAX,CAAZ,CAAJ,GAAiCxC,IAAI,CAACqG,GAAL,CAAS,CAAC7D,CAAC,GAAG,CAAJ,GAAQsE,CAAT,KAAe,IAAI9G,IAAI,CAACiB,EAAxB,IAA8B8F,CAAvC,CAAnC,CAAP;AACA,KAlH0C;AAmH3CG,IAAAA,cAAc,EAAE,UAAS1E,CAAT,EAAY;AAC3B,UAAIsE,CAAC,GAAG,OAAR;AACA,UAAIC,CAAC,GAAG,CAAR;AACA,UAAIC,CAAC,GAAG,CAAR;;AACA,UAAIxE,CAAC,KAAK,CAAV,EAAa;AACZ,eAAO,CAAP;AACA;;AACD,UAAI,CAACA,CAAC,IAAI,CAAN,MAAa,CAAjB,EAAoB;AACnB,eAAO,CAAP;AACA;;AACD,UAAI,CAACuE,CAAL,EAAQ;AACPA,QAAAA,CAAC,GAAG,IAAI,GAAR;AACA;;AACD,UAAIC,CAAC,GAAGhH,IAAI,CAACC,GAAL,CAAS,CAAT,CAAR,EAAqB;AACpB+G,QAAAA,CAAC,GAAG,CAAJ;AACAF,QAAAA,CAAC,GAAGC,CAAC,GAAG,CAAR;AACA,OAHD,MAGO;AACND,QAAAA,CAAC,GAAGC,CAAC,IAAI,IAAI/G,IAAI,CAACiB,EAAb,CAAD,GAAoBjB,IAAI,CAACiH,IAAL,CAAU,IAAID,CAAd,CAAxB;AACA;;AACD,aAAOA,CAAC,GAAGhH,IAAI,CAACiC,GAAL,CAAS,CAAT,EAAY,CAAC,EAAD,GAAMO,CAAlB,CAAJ,GAA2BxC,IAAI,CAACqG,GAAL,CAAS,CAAC7D,CAAC,GAAG,CAAJ,GAAQsE,CAAT,KAAe,IAAI9G,IAAI,CAACiB,EAAxB,IAA8B8F,CAAvC,CAA3B,GAAuE,CAA9E;AACA,KAvI0C;AAwI3CI,IAAAA,gBAAgB,EAAE,UAAS3E,CAAT,EAAY;AAC7B,UAAIsE,CAAC,GAAG,OAAR;AACA,UAAIC,CAAC,GAAG,CAAR;AACA,UAAIC,CAAC,GAAG,CAAR;;AACA,UAAIxE,CAAC,KAAK,CAAV,EAAa;AACZ,eAAO,CAAP;AACA;;AACD,UAAI,CAACA,CAAC,IAAI,IAAI,CAAV,MAAiB,CAArB,EAAwB;AACvB,eAAO,CAAP;AACA;;AACD,UAAI,CAACuE,CAAL,EAAQ;AACPA,QAAAA,CAAC,GAAG,KAAK,MAAM,GAAX,CAAJ;AACA;;AACD,UAAIC,CAAC,GAAGhH,IAAI,CAACC,GAAL,CAAS,CAAT,CAAR,EAAqB;AACpB+G,QAAAA,CAAC,GAAG,CAAJ;AACAF,QAAAA,CAAC,GAAGC,CAAC,GAAG,CAAR;AACA,OAHD,MAGO;AACND,QAAAA,CAAC,GAAGC,CAAC,IAAI,IAAI/G,IAAI,CAACiB,EAAb,CAAD,GAAoBjB,IAAI,CAACiH,IAAL,CAAU,IAAID,CAAd,CAAxB;AACA;;AACD,UAAIxE,CAAC,GAAG,CAAR,EAAW;AACV,eAAO,CAAC,GAAD,IAAQwE,CAAC,GAAGhH,IAAI,CAACiC,GAAL,CAAS,CAAT,EAAY,MAAMO,CAAC,IAAI,CAAX,CAAZ,CAAJ,GAAiCxC,IAAI,CAACqG,GAAL,CAAS,CAAC7D,CAAC,GAAG,CAAJ,GAAQsE,CAAT,KAAe,IAAI9G,IAAI,CAACiB,EAAxB,IAA8B8F,CAAvC,CAAzC,CAAP;AACA;;AACD,aAAOC,CAAC,GAAGhH,IAAI,CAACiC,GAAL,CAAS,CAAT,EAAY,CAAC,EAAD,IAAOO,CAAC,IAAI,CAAZ,CAAZ,CAAJ,GAAkCxC,IAAI,CAACqG,GAAL,CAAS,CAAC7D,CAAC,GAAG,CAAJ,GAAQsE,CAAT,KAAe,IAAI9G,IAAI,CAACiB,EAAxB,IAA8B8F,CAAvC,CAAlC,GAA8E,GAA9E,GAAoF,CAA3F;AACA,KA/J0C;AAgK3CK,IAAAA,UAAU,EAAE,UAAS5E,CAAT,EAAY;AACvB,UAAIsE,CAAC,GAAG,OAAR;AACA,aAAO,KAAKtE,CAAC,IAAI,CAAV,IAAeA,CAAf,IAAoB,CAACsE,CAAC,GAAG,CAAL,IAAUtE,CAAV,GAAcsE,CAAlC,CAAP;AACA,KAnK0C;AAoK3CO,IAAAA,WAAW,EAAE,UAAS7E,CAAT,EAAY;AACxB,UAAIsE,CAAC,GAAG,OAAR;AACA,aAAO,KAAK,CAACtE,CAAC,GAAGA,CAAC,GAAG,CAAJ,GAAQ,CAAb,IAAkBA,CAAlB,IAAuB,CAACsE,CAAC,GAAG,CAAL,IAAUtE,CAAV,GAAcsE,CAArC,IAA0C,CAA/C,CAAP;AACA,KAvK0C;AAwK3CQ,IAAAA,aAAa,EAAE,UAAS9E,CAAT,EAAY;AAC1B,UAAIsE,CAAC,GAAG,OAAR;;AACA,UAAI,CAACtE,CAAC,IAAI,IAAI,CAAV,IAAe,CAAnB,EAAsB;AACrB,eAAO,IAAI,CAAJ,IAASA,CAAC,GAAGA,CAAJ,IAAS,CAAC,CAACsE,CAAC,IAAK,KAAP,IAAiB,CAAlB,IAAuBtE,CAAvB,GAA2BsE,CAApC,CAAT,CAAP;AACA;;AACD,aAAO,IAAI,CAAJ,IAAS,CAACtE,CAAC,IAAI,CAAN,IAAWA,CAAX,IAAgB,CAAC,CAACsE,CAAC,IAAK,KAAP,IAAiB,CAAlB,IAAuBtE,CAAvB,GAA2BsE,CAA3C,IAAgD,CAAzD,CAAP;AACA,KA9K0C;AA+K3CS,IAAAA,YAAY,EAAE,UAAS/E,CAAT,EAAY;AACzB,aAAO,IAAI4C,aAAa,CAACoC,aAAd,CAA4B,IAAIhF,CAAhC,CAAX;AACA,KAjL0C;AAkL3CgF,IAAAA,aAAa,EAAE,UAAShF,CAAT,EAAY;AAC1B,UAAI,CAACA,CAAC,IAAI,CAAN,IAAY,IAAI,IAApB,EAA2B;AAC1B,eAAO,KAAK,SAASA,CAAT,GAAaA,CAAlB,CAAP;AACA,OAFD,MAEO,IAAIA,CAAC,GAAI,IAAI,IAAb,EAAoB;AAC1B,eAAO,KAAK,UAAUA,CAAC,IAAK,MAAM,IAAtB,IAA+BA,CAA/B,GAAmC,IAAxC,CAAP;AACA,OAFM,MAEA,IAAIA,CAAC,GAAI,MAAM,IAAf,EAAsB;AAC5B,eAAO,KAAK,UAAUA,CAAC,IAAK,OAAO,IAAvB,IAAgCA,CAAhC,GAAoC,MAAzC,CAAP;AACA;;AACD,aAAO,KAAK,UAAUA,CAAC,IAAK,QAAQ,IAAxB,IAAiCA,CAAjC,GAAqC,QAA1C,CAAP;AACA,KA3L0C;AA4L3CiF,IAAAA,eAAe,EAAE,UAASjF,CAAT,EAAY;AAC5B,UAAIA,CAAC,GAAG,IAAI,CAAZ,EAAe;AACd,eAAO4C,aAAa,CAACmC,YAAd,CAA2B/E,CAAC,GAAG,CAA/B,IAAoC,GAA3C;AACA;;AACD,aAAO4C,aAAa,CAACoC,aAAd,CAA4BhF,CAAC,GAAG,CAAJ,GAAQ,CAApC,IAAyC,GAAzC,GAA+C,IAAI,GAA1D;AACA;AAjM0C,GAA5C,CApdgC,CAupBhC;;AACAxH,EAAAA,OAAO,CAAC0M,gBAAR,GAA4B,YAAW;AACtC,WAAOC,MAAM,CAACC,qBAAP,IACND,MAAM,CAACE,2BADD,IAENF,MAAM,CAACG,wBAFD,IAGNH,MAAM,CAACI,sBAHD,IAINJ,MAAM,CAACK,uBAJD,IAKN,UAAS7M,QAAT,EAAmB;AAClB,aAAOwM,MAAM,CAACM,UAAP,CAAkB9M,QAAlB,EAA4B,OAAO,EAAnC,CAAP;AACA,KAPF;AAQA,GAT2B,EAA5B,CAxpBgC,CAkqBhC;;;AACAH,EAAAA,OAAO,CAACkN,mBAAR,GAA8B,UAASC,GAAT,EAAcC,KAAd,EAAqB;AAClD,QAAIC,MAAJ,EAAYC,MAAZ;AACA,QAAIC,CAAC,GAAGJ,GAAG,CAACK,aAAJ,IAAqBL,GAA7B;AAAA,QACCM,MAAM,GAAGN,GAAG,CAACO,aAAJ,IAAqBP,GAAG,CAACQ,UADnC;AAAA,QAECC,YAAY,GAAGH,MAAM,CAACI,qBAAP,EAFhB;AAIA,QAAIC,OAAO,GAAGP,CAAC,CAACO,OAAhB;;AACA,QAAIA,OAAO,IAAIA,OAAO,CAACrN,MAAR,GAAiB,CAAhC,EAAmC;AAClC4M,MAAAA,MAAM,GAAGS,OAAO,CAAC,CAAD,CAAP,CAAWC,OAApB;AACAT,MAAAA,MAAM,GAAGQ,OAAO,CAAC,CAAD,CAAP,CAAWE,OAApB;AAEA,KAJD,MAIO;AACNX,MAAAA,MAAM,GAAGE,CAAC,CAACQ,OAAX;AACAT,MAAAA,MAAM,GAAGC,CAAC,CAACS,OAAX;AACA,KAdiD,CAgBlD;AACA;AACA;;;AACA,QAAIC,WAAW,GAAGvJ,UAAU,CAAC1E,OAAO,CAACkO,QAAR,CAAiBT,MAAjB,EAAyB,cAAzB,CAAD,CAA5B;AACA,QAAIU,UAAU,GAAGzJ,UAAU,CAAC1E,OAAO,CAACkO,QAAR,CAAiBT,MAAjB,EAAyB,aAAzB,CAAD,CAA3B;AACA,QAAIW,YAAY,GAAG1J,UAAU,CAAC1E,OAAO,CAACkO,QAAR,CAAiBT,MAAjB,EAAyB,eAAzB,CAAD,CAA7B;AACA,QAAIY,aAAa,GAAG3J,UAAU,CAAC1E,OAAO,CAACkO,QAAR,CAAiBT,MAAjB,EAAyB,gBAAzB,CAAD,CAA9B;AACA,QAAIa,KAAK,GAAGV,YAAY,CAACW,KAAb,GAAqBX,YAAY,CAACY,IAAlC,GAAyCP,WAAzC,GAAuDG,YAAnE;AACA,QAAIK,MAAM,GAAGb,YAAY,CAACc,MAAb,GAAsBd,YAAY,CAACe,GAAnC,GAAyCR,UAAzC,GAAsDE,aAAnE,CAxBkD,CA0BlD;AACA;;AACAhB,IAAAA,MAAM,GAAGrI,IAAI,CAACI,KAAL,CAAW,CAACiI,MAAM,GAAGO,YAAY,CAACY,IAAtB,GAA6BP,WAA9B,IAA8CK,KAA9C,GAAuDb,MAAM,CAACa,KAA9D,GAAsElB,KAAK,CAACwB,uBAAvF,CAAT;AACAtB,IAAAA,MAAM,GAAGtI,IAAI,CAACI,KAAL,CAAW,CAACkI,MAAM,GAAGM,YAAY,CAACe,GAAtB,GAA4BR,UAA7B,IAA4CM,MAA5C,GAAsDhB,MAAM,CAACgB,MAA7D,GAAsErB,KAAK,CAACwB,uBAAvF,CAAT;AAEA,WAAO;AACN/J,MAAAA,CAAC,EAAEwI,MADG;AAENvI,MAAAA,CAAC,EAAEwI;AAFG,KAAP;AAKA,GApCD;;AAqCAtN,EAAAA,OAAO,CAAC6O,QAAR,GAAmB,UAASC,IAAT,EAAeC,SAAf,EAA0BC,MAA1B,EAAkC;AACpD,QAAIF,IAAI,CAACG,gBAAT,EAA2B;AAC1BH,MAAAA,IAAI,CAACG,gBAAL,CAAsBF,SAAtB,EAAiCC,MAAjC;AACA,KAFD,MAEO,IAAIF,IAAI,CAACI,WAAT,EAAsB;AAC5BJ,MAAAA,IAAI,CAACI,WAAL,CAAiB,OAAOH,SAAxB,EAAmCC,MAAnC;AACA,KAFM,MAEA;AACNF,MAAAA,IAAI,CAAC,OAAOC,SAAR,CAAJ,GAAyBC,MAAzB;AACA;AACD,GARD;;AASAhP,EAAAA,OAAO,CAACmP,WAAR,GAAsB,UAASL,IAAT,EAAeC,SAAf,EAA0BK,OAA1B,EAAmC;AACxD,QAAIN,IAAI,CAACO,mBAAT,EAA8B;AAC7BP,MAAAA,IAAI,CAACO,mBAAL,CAAyBN,SAAzB,EAAoCK,OAApC,EAA6C,KAA7C;AACA,KAFD,MAEO,IAAIN,IAAI,CAACQ,WAAT,EAAsB;AAC5BR,MAAAA,IAAI,CAACQ,WAAL,CAAiB,OAAOP,SAAxB,EAAmCK,OAAnC;AACA,KAFM,MAEA;AACNN,MAAAA,IAAI,CAAC,OAAOC,SAAR,CAAJ,GAAyB/O,OAAO,CAACoE,IAAjC;AACA;AACD,GARD,CAjtBgC,CA2tBhC;;;AACA,WAASmL,aAAT,CAAuBC,UAAvB,EAAmCV,IAAnC,EAAyCW,cAAzC,EAAyD;AACxD,QAAIC,aAAJ;;AACA,QAAI,OAAOF,UAAP,KAAuB,QAA3B,EAAqC;AACpCE,MAAAA,aAAa,GAAGC,QAAQ,CAACH,UAAD,EAAa,EAAb,CAAxB;;AAEA,UAAIA,UAAU,CAAC3M,OAAX,CAAmB,GAAnB,MAA4B,CAAC,CAAjC,EAAoC;AACnC;AACA6M,QAAAA,aAAa,GAAGA,aAAa,GAAG,GAAhB,GAAsBZ,IAAI,CAACc,UAAL,CAAgBH,cAAhB,CAAtC;AACA;AACD,KAPD,MAOO;AACNC,MAAAA,aAAa,GAAGF,UAAhB;AACA;;AAED,WAAOE,aAAP;AACA;AAED;AACD;AACA;AACA;;;AACC,WAASG,kBAAT,CAA4B7O,KAA5B,EAAmC;AAClC,WAAOA,KAAK,KAAK4B,SAAV,IAAuB5B,KAAK,KAAK,IAAjC,IAAyCA,KAAK,KAAK,MAA1D;AACA,GAlvB+B,CAovBhC;AACA;AACA;AACA;AACA;;;AACA,WAAS8O,sBAAT,CAAgCC,OAAhC,EAAyCC,QAAzC,EAAmDC,kBAAnD,EAAuE;AACtE,QAAIC,IAAI,GAAGC,QAAQ,CAACC,WAApB;AACA,QAAIR,UAAU,GAAGG,OAAO,CAACH,UAAzB;AACA,QAAIS,eAAe,GAAGH,IAAI,CAACI,gBAAL,CAAsBP,OAAtB,EAA+BC,QAA/B,CAAtB;AACA,QAAIO,oBAAoB,GAAGL,IAAI,CAACI,gBAAL,CAAsBV,UAAtB,EAAkCI,QAAlC,CAA3B;AACA,QAAIQ,QAAQ,GAAGX,kBAAkB,CAACQ,eAAD,CAAjC;AACA,QAAII,aAAa,GAAGZ,kBAAkB,CAACU,oBAAD,CAAtC;AACA,QAAIG,QAAQ,GAAGnL,MAAM,CAACG,iBAAtB;;AAEA,QAAI8K,QAAQ,IAAIC,aAAhB,EAA+B;AAC9B,aAAOzL,IAAI,CAACS,GAAL,CACN+K,QAAQ,GAAEjB,aAAa,CAACc,eAAD,EAAkBN,OAAlB,EAA2BE,kBAA3B,CAAf,GAAgES,QADlE,EAEND,aAAa,GAAElB,aAAa,CAACgB,oBAAD,EAAuBX,UAAvB,EAAmCK,kBAAnC,CAAf,GAAwES,QAF/E,CAAP;AAGA;;AAED,WAAO,MAAP;AACA,GAzwB+B,CA0wBhC;;;AACA1Q,EAAAA,OAAO,CAAC2Q,kBAAR,GAA6B,UAASZ,OAAT,EAAkB;AAC9C,WAAOD,sBAAsB,CAACC,OAAD,EAAU,WAAV,EAAuB,aAAvB,CAA7B;AACA,GAFD,CA3wBgC,CA8wBhC;;;AACA/P,EAAAA,OAAO,CAAC4Q,mBAAR,GAA8B,UAASb,OAAT,EAAkB;AAC/C,WAAOD,sBAAsB,CAACC,OAAD,EAAU,YAAV,EAAwB,cAAxB,CAA7B;AACA,GAFD;;AAGA/P,EAAAA,OAAO,CAAC6Q,eAAR,GAA0B,UAASd,OAAT,EAAkB;AAC3C,QAAIe,SAAS,GAAGf,OAAO,CAACH,UAAxB;AACA,QAAI3B,WAAW,GAAG0B,QAAQ,CAAC3P,OAAO,CAACkO,QAAR,CAAiB4C,SAAjB,EAA4B,cAA5B,CAAD,EAA8C,EAA9C,CAA1B;AACA,QAAI1C,YAAY,GAAGuB,QAAQ,CAAC3P,OAAO,CAACkO,QAAR,CAAiB4C,SAAjB,EAA4B,eAA5B,CAAD,EAA+C,EAA/C,CAA3B;AACA,QAAIC,CAAC,GAAGD,SAAS,CAACE,WAAV,GAAwB/C,WAAxB,GAAsCG,YAA9C;AACA,QAAI6C,EAAE,GAAGjR,OAAO,CAAC2Q,kBAAR,CAA2BZ,OAA3B,CAAT;AACA,WAAOtL,KAAK,CAACwM,EAAD,CAAL,GAAWF,CAAX,GAAe/L,IAAI,CAACS,GAAL,CAASsL,CAAT,EAAYE,EAAZ,CAAtB;AACA,GAPD;;AAQAjR,EAAAA,OAAO,CAACkR,gBAAR,GAA2B,UAASnB,OAAT,EAAkB;AAC5C,QAAIe,SAAS,GAAGf,OAAO,CAACH,UAAxB;AACA,QAAIzB,UAAU,GAAGwB,QAAQ,CAAC3P,OAAO,CAACkO,QAAR,CAAiB4C,SAAjB,EAA4B,aAA5B,CAAD,EAA6C,EAA7C,CAAzB;AACA,QAAIzC,aAAa,GAAGsB,QAAQ,CAAC3P,OAAO,CAACkO,QAAR,CAAiB4C,SAAjB,EAA4B,gBAA5B,CAAD,EAAgD,EAAhD,CAA5B;AACA,QAAIK,CAAC,GAAGL,SAAS,CAACM,YAAV,GAAyBjD,UAAzB,GAAsCE,aAA9C;AACA,QAAIgD,EAAE,GAAGrR,OAAO,CAAC4Q,mBAAR,CAA4Bb,OAA5B,CAAT;AACA,WAAOtL,KAAK,CAAC4M,EAAD,CAAL,GAAWF,CAAX,GAAenM,IAAI,CAACS,GAAL,CAAS0L,CAAT,EAAYE,EAAZ,CAAtB;AACA,GAPD;;AAQArR,EAAAA,OAAO,CAACkO,QAAR,GAAmB,UAASoD,EAAT,EAAaC,QAAb,EAAuB;AACzC,WAAOD,EAAE,CAACE,YAAH,GACNF,EAAE,CAACE,YAAH,CAAgBD,QAAhB,CADM,GAENpB,QAAQ,CAACC,WAAT,CAAqBE,gBAArB,CAAsCgB,EAAtC,EAA0C,IAA1C,EAAgDG,gBAAhD,CAAiEF,QAAjE,CAFD;AAGA,GAJD;;AAKAvR,EAAAA,OAAO,CAAC0R,WAAR,GAAsB,UAAStE,KAAT,EAAgB;AACrC,QAAIuE,UAAU,GAAGvE,KAAK,CAACwB,uBAAN,GAAgCjC,MAAM,CAACiF,gBAAP,IAA2B,CAA5E;;AACA,QAAID,UAAU,KAAK,CAAnB,EAAsB;AACrB;AACA;;AAED,QAAIlE,MAAM,GAAGL,KAAK,CAACK,MAAnB;AACA,QAAIgB,MAAM,GAAGrB,KAAK,CAACqB,MAAnB;AACA,QAAIH,KAAK,GAAGlB,KAAK,CAACkB,KAAlB;AAEAb,IAAAA,MAAM,CAACgB,MAAP,GAAgBA,MAAM,GAAGkD,UAAzB;AACAlE,IAAAA,MAAM,CAACa,KAAP,GAAeA,KAAK,GAAGqD,UAAvB;AACAvE,IAAAA,KAAK,CAACyE,GAAN,CAAUC,KAAV,CAAgBH,UAAhB,EAA4BA,UAA5B,EAZqC,CAcrC;AACA;AACA;;AACAlE,IAAAA,MAAM,CAACsE,KAAP,CAAatD,MAAb,GAAsBA,MAAM,GAAG,IAA/B;AACAhB,IAAAA,MAAM,CAACsE,KAAP,CAAazD,KAAb,GAAqBA,KAAK,GAAG,IAA7B;AACA,GAnBD,CAvyBgC,CA2zBhC;;;AACAtO,EAAAA,OAAO,CAACgS,KAAR,GAAgB,UAAS5E,KAAT,EAAgB;AAC/BA,IAAAA,KAAK,CAACyE,GAAN,CAAUI,SAAV,CAAoB,CAApB,EAAuB,CAAvB,EAA0B7E,KAAK,CAACkB,KAAhC,EAAuClB,KAAK,CAACqB,MAA7C;AACA,GAFD;;AAGAzO,EAAAA,OAAO,CAACkS,UAAR,GAAqB,UAASC,SAAT,EAAoBC,SAApB,EAA+BC,UAA/B,EAA2C;AAC/D,WAAOD,SAAS,GAAG,GAAZ,GAAkBD,SAAlB,GAA8B,KAA9B,GAAsCE,UAA7C;AACA,GAFD;;AAGArS,EAAAA,OAAO,CAACsS,WAAR,GAAsB,UAAST,GAAT,EAAcU,IAAd,EAAoBC,aAApB,EAAmCC,KAAnC,EAA0C;AAC/DA,IAAAA,KAAK,GAAGA,KAAK,IAAI,EAAjB;AACA,QAAIC,IAAI,GAAGD,KAAK,CAACC,IAAN,GAAaD,KAAK,CAACC,IAAN,IAAc,EAAtC;AACA,QAAIC,EAAE,GAAGF,KAAK,CAACG,cAAN,GAAuBH,KAAK,CAACG,cAAN,IAAwB,EAAxD;;AAEA,QAAIH,KAAK,CAACF,IAAN,KAAeA,IAAnB,EAAyB;AACxBG,MAAAA,IAAI,GAAGD,KAAK,CAACC,IAAN,GAAa,EAApB;AACAC,MAAAA,EAAE,GAAGF,KAAK,CAACG,cAAN,GAAuB,EAA5B;AACAH,MAAAA,KAAK,CAACF,IAAN,GAAaA,IAAb;AACA;;AAEDV,IAAAA,GAAG,CAACU,IAAJ,GAAWA,IAAX;AACA,QAAIM,OAAO,GAAG,CAAd;AACA7S,IAAAA,OAAO,CAACC,IAAR,CAAauS,aAAb,EAA4B,UAASM,KAAT,EAAgB;AAC3C;AACA,UAAIA,KAAK,KAAKlQ,SAAV,IAAuBkQ,KAAK,KAAK,IAAjC,IAAyC9S,OAAO,CAACQ,OAAR,CAAgBsS,KAAhB,MAA2B,IAAxE,EAA8E;AAC7ED,QAAAA,OAAO,GAAG7S,OAAO,CAAC+S,WAAR,CAAoBlB,GAApB,EAAyBa,IAAzB,EAA+BC,EAA/B,EAAmCE,OAAnC,EAA4CC,KAA5C,CAAV;AACA,OAFD,MAEO,IAAI9S,OAAO,CAACQ,OAAR,CAAgBsS,KAAhB,CAAJ,EAA4B;AAClC;AACA;AACA9S,QAAAA,OAAO,CAACC,IAAR,CAAa6S,KAAb,EAAoB,UAASE,WAAT,EAAsB;AACzC;AACA,cAAIA,WAAW,KAAKpQ,SAAhB,IAA6BoQ,WAAW,KAAK,IAA7C,IAAqD,CAAChT,OAAO,CAACQ,OAAR,CAAgBwS,WAAhB,CAA1D,EAAwF;AACvFH,YAAAA,OAAO,GAAG7S,OAAO,CAAC+S,WAAR,CAAoBlB,GAApB,EAAyBa,IAAzB,EAA+BC,EAA/B,EAAmCE,OAAnC,EAA4CG,WAA5C,CAAV;AACA;AACD,SALD;AAMA;AACD,KAdD;AAgBA,QAAIC,KAAK,GAAGN,EAAE,CAAClS,MAAH,GAAY,CAAxB;;AACA,QAAIwS,KAAK,GAAGT,aAAa,CAAC/R,MAA1B,EAAkC;AACjC,WAAK,IAAIH,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG2S,KAApB,EAA2B3S,CAAC,EAA5B,EAAgC;AAC/B,eAAOoS,IAAI,CAACC,EAAE,CAACrS,CAAD,CAAH,CAAX;AACA;;AACDqS,MAAAA,EAAE,CAACO,MAAH,CAAU,CAAV,EAAaD,KAAb;AACA;;AACD,WAAOJ,OAAP;AACA,GArCD;;AAsCA7S,EAAAA,OAAO,CAAC+S,WAAR,GAAsB,UAASlB,GAAT,EAAca,IAAd,EAAoBC,EAApB,EAAwBE,OAAxB,EAAiCM,MAAjC,EAAyC;AAC9D,QAAIC,SAAS,GAAGV,IAAI,CAACS,MAAD,CAApB;;AACA,QAAI,CAACC,SAAL,EAAgB;AACfA,MAAAA,SAAS,GAAGV,IAAI,CAACS,MAAD,CAAJ,GAAetB,GAAG,CAACkB,WAAJ,CAAgBI,MAAhB,EAAwB7E,KAAnD;AACAqE,MAAAA,EAAE,CAAClQ,IAAH,CAAQ0Q,MAAR;AACA;;AACD,QAAIC,SAAS,GAAGP,OAAhB,EAAyB;AACxBA,MAAAA,OAAO,GAAGO,SAAV;AACA;;AACD,WAAOP,OAAP;AACA,GAVD;;AAWA7S,EAAAA,OAAO,CAACqT,kBAAR,GAA6B,UAASb,aAAT,EAAwB;AACpD,QAAIc,aAAa,GAAG,CAApB;AACAtT,IAAAA,OAAO,CAACC,IAAR,CAAauS,aAAb,EAA4B,UAASM,KAAT,EAAgB;AAC3C,UAAI9S,OAAO,CAACQ,OAAR,CAAgBsS,KAAhB,CAAJ,EAA4B;AAC3B,YAAIA,KAAK,CAACrS,MAAN,GAAe6S,aAAnB,EAAkC;AACjCA,UAAAA,aAAa,GAAGR,KAAK,CAACrS,MAAtB;AACA;AACD;AACD,KAND;AAOA,WAAO6S,aAAP;AACA,GAVD;;AAWAtT,EAAAA,OAAO,CAACuT,oBAAR,GAA+B,UAAS1B,GAAT,EAAchN,CAAd,EAAiBC,CAAjB,EAAoBwJ,KAApB,EAA2BG,MAA3B,EAAmC+E,MAAnC,EAA2C;AACzE3B,IAAAA,GAAG,CAAC4B,SAAJ;AACA5B,IAAAA,GAAG,CAAC6B,MAAJ,CAAW7O,CAAC,GAAG2O,MAAf,EAAuB1O,CAAvB;AACA+M,IAAAA,GAAG,CAAC8B,MAAJ,CAAW9O,CAAC,GAAGyJ,KAAJ,GAAYkF,MAAvB,EAA+B1O,CAA/B;AACA+M,IAAAA,GAAG,CAAC+B,gBAAJ,CAAqB/O,CAAC,GAAGyJ,KAAzB,EAAgCxJ,CAAhC,EAAmCD,CAAC,GAAGyJ,KAAvC,EAA8CxJ,CAAC,GAAG0O,MAAlD;AACA3B,IAAAA,GAAG,CAAC8B,MAAJ,CAAW9O,CAAC,GAAGyJ,KAAf,EAAsBxJ,CAAC,GAAG2J,MAAJ,GAAa+E,MAAnC;AACA3B,IAAAA,GAAG,CAAC+B,gBAAJ,CAAqB/O,CAAC,GAAGyJ,KAAzB,EAAgCxJ,CAAC,GAAG2J,MAApC,EAA4C5J,CAAC,GAAGyJ,KAAJ,GAAYkF,MAAxD,EAAgE1O,CAAC,GAAG2J,MAApE;AACAoD,IAAAA,GAAG,CAAC8B,MAAJ,CAAW9O,CAAC,GAAG2O,MAAf,EAAuB1O,CAAC,GAAG2J,MAA3B;AACAoD,IAAAA,GAAG,CAAC+B,gBAAJ,CAAqB/O,CAArB,EAAwBC,CAAC,GAAG2J,MAA5B,EAAoC5J,CAApC,EAAuCC,CAAC,GAAG2J,MAAJ,GAAa+E,MAApD;AACA3B,IAAAA,GAAG,CAAC8B,MAAJ,CAAW9O,CAAX,EAAcC,CAAC,GAAG0O,MAAlB;AACA3B,IAAAA,GAAG,CAAC+B,gBAAJ,CAAqB/O,CAArB,EAAwBC,CAAxB,EAA2BD,CAAC,GAAG2O,MAA/B,EAAuC1O,CAAvC;AACA+M,IAAAA,GAAG,CAACgC,SAAJ;AACA,GAZD;;AAaA7T,EAAAA,OAAO,CAACL,KAAR,GAAgB,UAASmU,CAAT,EAAY;AAC3B,QAAI,CAACnU,KAAL,EAAY;AACXoU,MAAAA,OAAO,CAACC,KAAR,CAAc,qBAAd;AACA,aAAOF,CAAP;AACA;AAED;;;AACA,QAAIA,CAAC,YAAYG,cAAjB,EAAiC;AAChC,aAAOtU,KAAK,CAACI,KAAK,CAACmU,QAAN,CAAeC,MAAf,CAAsBC,YAAvB,CAAZ;AACA;;AAED,WAAOzU,KAAK,CAACmU,CAAD,CAAZ;AACA,GAZD;;AAaA9T,EAAAA,OAAO,CAACQ,OAAR,GAAkBkB,KAAK,CAAClB,OAAN,GACjB,UAASM,GAAT,EAAc;AACb,WAAOY,KAAK,CAAClB,OAAN,CAAcM,GAAd,CAAP;AACA,GAHgB,GAIjB,UAASA,GAAT,EAAc;AACb,WAAOF,MAAM,CAACe,SAAP,CAAiB0S,QAAjB,CAA0B3T,IAA1B,CAA+BI,GAA/B,MAAwC,gBAA/C;AACA,GANF,CAx5BgC,CA+5BhC;;AACAd,EAAAA,OAAO,CAACsU,WAAR,GAAsB,UAASC,EAAT,EAAaC,EAAb,EAAiB;AACtC,QAAIlU,CAAJ,EAAOgB,IAAP,EAAamT,EAAb,EAAiBC,EAAjB;;AAEA,QAAI,CAACH,EAAD,IAAO,CAACC,EAAR,IAAcD,EAAE,CAAC9T,MAAH,KAAc+T,EAAE,CAAC/T,MAAnC,EAA2C;AAC1C,aAAO,KAAP;AACA;;AAED,SAAKH,CAAC,GAAG,CAAJ,EAAOgB,IAAI,GAACiT,EAAE,CAAC9T,MAApB,EAA4BH,CAAC,GAAGgB,IAAhC,EAAsC,EAAEhB,CAAxC,EAA2C;AAC1CmU,MAAAA,EAAE,GAAGF,EAAE,CAACjU,CAAD,CAAP;AACAoU,MAAAA,EAAE,GAAGF,EAAE,CAAClU,CAAD,CAAP;;AAEA,UAAImU,EAAE,YAAY/S,KAAd,IAAuBgT,EAAE,YAAYhT,KAAzC,EAAgD;AAC/C,YAAI,CAAC1B,OAAO,CAACsU,WAAR,CAAoBG,EAApB,EAAwBC,EAAxB,CAAL,EAAkC;AACjC,iBAAO,KAAP;AACA;AACD,OAJD,MAIO,IAAID,EAAE,KAAKC,EAAX,EAAe;AACrB;AACA,eAAO,KAAP;AACA;AACD;;AAED,WAAO,IAAP;AACA,GAtBD;;AAuBA1U,EAAAA,OAAO,CAAC2U,YAAR,GAAuB,UAASC,EAAT,EAAaC,IAAb,EAAmBC,KAAnB,EAA0B;AAChD,QAAIF,EAAE,IAAI,OAAOA,EAAE,CAAClU,IAAV,KAAmB,UAA7B,EAAyC;AACxCkU,MAAAA,EAAE,CAAC3Q,KAAH,CAAS6Q,KAAT,EAAgBD,IAAhB;AACA;AACD,GAJD;;AAKA7U,EAAAA,OAAO,CAAC+U,aAAR,GAAwB,UAASC,UAAT,EAAqB;AAC5C;AACA,WAAQA,UAAU,YAAYC,aAAvB,GACND,UADM,GAENhV,OAAO,CAACL,KAAR,CAAcqV,UAAd,EAA0BE,QAA1B,CAAmC,GAAnC,EAAwCC,MAAxC,CAA+C,GAA/C,EAAoDC,SAApD,EAFD;AAGA,GALD;AAMA,CAl8BD","sourcesContent":["/* global window: false */\n/* global document: false */\n'use strict';\n\nvar color = require('chartjs-color');\n\nmodule.exports = function(Chart) {\n\t// Global Chart helpers object for utility methods and classes\n\tvar helpers = Chart.helpers = {};\n\n\t// -- Basic js utility methods\n\thelpers.each = function(loopable, callback, self, reverse) {\n\t\t// Check to see if null or undefined firstly.\n\t\tvar i, len;\n\t\tif (helpers.isArray(loopable)) {\n\t\t\tlen = loopable.length;\n\t\t\tif (reverse) {\n\t\t\t\tfor (i = len - 1; i >= 0; i--) {\n\t\t\t\t\tcallback.call(self, loopable[i], i);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\t\tcallback.call(self, loopable[i], i);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (typeof loopable === 'object') {\n\t\t\tvar keys = Object.keys(loopable);\n\t\t\tlen = keys.length;\n\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\tcallback.call(self, loopable[keys[i]], keys[i]);\n\t\t\t}\n\t\t}\n\t};\n\thelpers.clone = function(obj) {\n\t\tvar objClone = {};\n\t\thelpers.each(obj, function(value, key) {\n\t\t\tif (helpers.isArray(value)) {\n\t\t\t\tobjClone[key] = value.slice(0);\n\t\t\t} else if (typeof value === 'object' && value !== null) {\n\t\t\t\tobjClone[key] = helpers.clone(value);\n\t\t\t} else {\n\t\t\t\tobjClone[key] = value;\n\t\t\t}\n\t\t});\n\t\treturn objClone;\n\t};\n\thelpers.extend = function(base) {\n\t\tvar setFn = function(value, key) {\n\t\t\tbase[key] = value;\n\t\t};\n\t\tfor (var i = 1, ilen = arguments.length; i < ilen; i++) {\n\t\t\thelpers.each(arguments[i], setFn);\n\t\t}\n\t\treturn base;\n\t};\n\t// Need a special merge function to chart configs since they are now grouped\n\thelpers.configMerge = function(_base) {\n\t\tvar base = helpers.clone(_base);\n\t\thelpers.each(Array.prototype.slice.call(arguments, 1), function(extension) {\n\t\t\thelpers.each(extension, function(value, key) {\n\t\t\t\tvar baseHasProperty = base.hasOwnProperty(key);\n\t\t\t\tvar baseVal = baseHasProperty ? base[key] : {};\n\n\t\t\t\tif (key === 'scales') {\n\t\t\t\t\t// Scale config merging is complex. Add our own function here for that\n\t\t\t\t\tbase[key] = helpers.scaleMerge(baseVal, value);\n\t\t\t\t} else if (key === 'scale') {\n\t\t\t\t\t// Used in polar area & radar charts since there is only one scale\n\t\t\t\t\tbase[key] = helpers.configMerge(baseVal, Chart.scaleService.getScaleDefaults(value.type), value);\n\t\t\t\t} else if (baseHasProperty\n\t\t\t\t\t\t&& typeof baseVal === 'object'\n\t\t\t\t\t\t&& !helpers.isArray(baseVal)\n\t\t\t\t\t\t&& baseVal !== null\n\t\t\t\t\t\t&& typeof value === 'object'\n\t\t\t\t\t\t&& !helpers.isArray(value)) {\n\t\t\t\t\t// If we are overwriting an object with an object, do a merge of the properties.\n\t\t\t\t\tbase[key] = helpers.configMerge(baseVal, value);\n\t\t\t\t} else {\n\t\t\t\t\t// can just overwrite the value in this case\n\t\t\t\t\tbase[key] = value;\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\treturn base;\n\t};\n\thelpers.scaleMerge = function(_base, extension) {\n\t\tvar base = helpers.clone(_base);\n\n\t\thelpers.each(extension, function(value, key) {\n\t\t\tif (key === 'xAxes' || key === 'yAxes') {\n\t\t\t\t// These properties are arrays of items\n\t\t\t\tif (base.hasOwnProperty(key)) {\n\t\t\t\t\thelpers.each(value, function(valueObj, index) {\n\t\t\t\t\t\tvar axisType = helpers.getValueOrDefault(valueObj.type, key === 'xAxes' ? 'category' : 'linear');\n\t\t\t\t\t\tvar axisDefaults = Chart.scaleService.getScaleDefaults(axisType);\n\t\t\t\t\t\tif (index >= base[key].length || !base[key][index].type) {\n\t\t\t\t\t\t\tbase[key].push(helpers.configMerge(axisDefaults, valueObj));\n\t\t\t\t\t\t} else if (valueObj.type && valueObj.type !== base[key][index].type) {\n\t\t\t\t\t\t\t// Type changed. Bring in the new defaults before we bring in valueObj so that valueObj can override the correct scale defaults\n\t\t\t\t\t\t\tbase[key][index] = helpers.configMerge(base[key][index], axisDefaults, valueObj);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Type is the same\n\t\t\t\t\t\t\tbase[key][index] = helpers.configMerge(base[key][index], valueObj);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tbase[key] = [];\n\t\t\t\t\thelpers.each(value, function(valueObj) {\n\t\t\t\t\t\tvar axisType = helpers.getValueOrDefault(valueObj.type, key === 'xAxes' ? 'category' : 'linear');\n\t\t\t\t\t\tbase[key].push(helpers.configMerge(Chart.scaleService.getScaleDefaults(axisType), valueObj));\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else if (base.hasOwnProperty(key) && typeof base[key] === 'object' && base[key] !== null && typeof value === 'object') {\n\t\t\t\t// If we are overwriting an object with an object, do a merge of the properties.\n\t\t\t\tbase[key] = helpers.configMerge(base[key], value);\n\n\t\t\t} else {\n\t\t\t\t// can just overwrite the value in this case\n\t\t\t\tbase[key] = value;\n\t\t\t}\n\t\t});\n\n\t\treturn base;\n\t};\n\thelpers.getValueAtIndexOrDefault = function(value, index, defaultValue) {\n\t\tif (value === undefined || value === null) {\n\t\t\treturn defaultValue;\n\t\t}\n\n\t\tif (helpers.isArray(value)) {\n\t\t\treturn index < value.length ? value[index] : defaultValue;\n\t\t}\n\n\t\treturn value;\n\t};\n\thelpers.getValueOrDefault = function(value, defaultValue) {\n\t\treturn value === undefined ? defaultValue : value;\n\t};\n\thelpers.indexOf = Array.prototype.indexOf?\n\t\tfunction(array, item) {\n\t\t\treturn array.indexOf(item);\n\t\t}:\n\t\tfunction(array, item) {\n\t\t\tfor (var i = 0, ilen = array.length; i < ilen; ++i) {\n\t\t\t\tif (array[i] === item) {\n\t\t\t\t\treturn i;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn -1;\n\t\t};\n\thelpers.where = function(collection, filterCallback) {\n\t\tif (helpers.isArray(collection) && Array.prototype.filter) {\n\t\t\treturn collection.filter(filterCallback);\n\t\t}\n\t\tvar filtered = [];\n\n\t\thelpers.each(collection, function(item) {\n\t\t\tif (filterCallback(item)) {\n\t\t\t\tfiltered.push(item);\n\t\t\t}\n\t\t});\n\n\t\treturn filtered;\n\t};\n\thelpers.findIndex = Array.prototype.findIndex?\n\t\tfunction(array, callback, scope) {\n\t\t\treturn array.findIndex(callback, scope);\n\t\t} :\n\t\tfunction(array, callback, scope) {\n\t\t\tscope = scope === undefined? array : scope;\n\t\t\tfor (var i = 0, ilen = array.length; i < ilen; ++i) {\n\t\t\t\tif (callback.call(scope, array[i], i, array)) {\n\t\t\t\t\treturn i;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn -1;\n\t\t};\n\thelpers.findNextWhere = function(arrayToSearch, filterCallback, startIndex) {\n\t\t// Default to start of the array\n\t\tif (startIndex === undefined || startIndex === null) {\n\t\t\tstartIndex = -1;\n\t\t}\n\t\tfor (var i = startIndex + 1; i < arrayToSearch.length; i++) {\n\t\t\tvar currentItem = arrayToSearch[i];\n\t\t\tif (filterCallback(currentItem)) {\n\t\t\t\treturn currentItem;\n\t\t\t}\n\t\t}\n\t};\n\thelpers.findPreviousWhere = function(arrayToSearch, filterCallback, startIndex) {\n\t\t// Default to end of the array\n\t\tif (startIndex === undefined || startIndex === null) {\n\t\t\tstartIndex = arrayToSearch.length;\n\t\t}\n\t\tfor (var i = startIndex - 1; i >= 0; i--) {\n\t\t\tvar currentItem = arrayToSearch[i];\n\t\t\tif (filterCallback(currentItem)) {\n\t\t\t\treturn currentItem;\n\t\t\t}\n\t\t}\n\t};\n\thelpers.inherits = function(extensions) {\n\t\t// Basic javascript inheritance based on the model created in Backbone.js\n\t\tvar me = this;\n\t\tvar ChartElement = (extensions && extensions.hasOwnProperty('constructor')) ? extensions.constructor : function() {\n\t\t\treturn me.apply(this, arguments);\n\t\t};\n\n\t\tvar Surrogate = function() {\n\t\t\tthis.constructor = ChartElement;\n\t\t};\n\t\tSurrogate.prototype = me.prototype;\n\t\tChartElement.prototype = new Surrogate();\n\n\t\tChartElement.extend = helpers.inherits;\n\n\t\tif (extensions) {\n\t\t\thelpers.extend(ChartElement.prototype, extensions);\n\t\t}\n\n\t\tChartElement.__super__ = me.prototype;\n\n\t\treturn ChartElement;\n\t};\n\thelpers.noop = function() {};\n\thelpers.uid = (function() {\n\t\tvar id = 0;\n\t\treturn function() {\n\t\t\treturn id++;\n\t\t};\n\t}());\n\t// -- Math methods\n\thelpers.isNumber = function(n) {\n\t\treturn !isNaN(parseFloat(n)) && isFinite(n);\n\t};\n\thelpers.almostEquals = function(x, y, epsilon) {\n\t\treturn Math.abs(x - y) < epsilon;\n\t};\n\thelpers.almostWhole = function(x, epsilon) {\n\t\tvar rounded = Math.round(x);\n\t\treturn (((rounded - epsilon) < x) && ((rounded + epsilon) > x));\n\t};\n\thelpers.max = function(array) {\n\t\treturn array.reduce(function(max, value) {\n\t\t\tif (!isNaN(value)) {\n\t\t\t\treturn Math.max(max, value);\n\t\t\t}\n\t\t\treturn max;\n\t\t}, Number.NEGATIVE_INFINITY);\n\t};\n\thelpers.min = function(array) {\n\t\treturn array.reduce(function(min, value) {\n\t\t\tif (!isNaN(value)) {\n\t\t\t\treturn Math.min(min, value);\n\t\t\t}\n\t\t\treturn min;\n\t\t}, Number.POSITIVE_INFINITY);\n\t};\n\thelpers.sign = Math.sign?\n\t\tfunction(x) {\n\t\t\treturn Math.sign(x);\n\t\t} :\n\t\tfunction(x) {\n\t\t\tx = +x; // convert to a number\n\t\t\tif (x === 0 || isNaN(x)) {\n\t\t\t\treturn x;\n\t\t\t}\n\t\t\treturn x > 0 ? 1 : -1;\n\t\t};\n\thelpers.log10 = Math.log10?\n\t\tfunction(x) {\n\t\t\treturn Math.log10(x);\n\t\t} :\n\t\tfunction(x) {\n\t\t\treturn Math.log(x) / Math.LN10;\n\t\t};\n\thelpers.toRadians = function(degrees) {\n\t\treturn degrees * (Math.PI / 180);\n\t};\n\thelpers.toDegrees = function(radians) {\n\t\treturn radians * (180 / Math.PI);\n\t};\n\t// Gets the angle from vertical upright to the point about a centre.\n\thelpers.getAngleFromPoint = function(centrePoint, anglePoint) {\n\t\tvar distanceFromXCenter = anglePoint.x - centrePoint.x,\n\t\t\tdistanceFromYCenter = anglePoint.y - centrePoint.y,\n\t\t\tradialDistanceFromCenter = Math.sqrt(distanceFromXCenter * distanceFromXCenter + distanceFromYCenter * distanceFromYCenter);\n\n\t\tvar angle = Math.atan2(distanceFromYCenter, distanceFromXCenter);\n\n\t\tif (angle < (-0.5 * Math.PI)) {\n\t\t\tangle += 2.0 * Math.PI; // make sure the returned angle is in the range of (-PI/2, 3PI/2]\n\t\t}\n\n\t\treturn {\n\t\t\tangle: angle,\n\t\t\tdistance: radialDistanceFromCenter\n\t\t};\n\t};\n\thelpers.distanceBetweenPoints = function(pt1, pt2) {\n\t\treturn Math.sqrt(Math.pow(pt2.x - pt1.x, 2) + Math.pow(pt2.y - pt1.y, 2));\n\t};\n\thelpers.aliasPixel = function(pixelWidth) {\n\t\treturn (pixelWidth % 2 === 0) ? 0 : 0.5;\n\t};\n\thelpers.splineCurve = function(firstPoint, middlePoint, afterPoint, t) {\n\t\t// Props to Rob Spencer at scaled innovation for his post on splining between points\n\t\t// http://scaledinnovation.com/analytics/splines/aboutSplines.html\n\n\t\t// This function must also respect \"skipped\" points\n\n\t\tvar previous = firstPoint.skip ? middlePoint : firstPoint,\n\t\t\tcurrent = middlePoint,\n\t\t\tnext = afterPoint.skip ? middlePoint : afterPoint;\n\n\t\tvar d01 = Math.sqrt(Math.pow(current.x - previous.x, 2) + Math.pow(current.y - previous.y, 2));\n\t\tvar d12 = Math.sqrt(Math.pow(next.x - current.x, 2) + Math.pow(next.y - current.y, 2));\n\n\t\tvar s01 = d01 / (d01 + d12);\n\t\tvar s12 = d12 / (d01 + d12);\n\n\t\t// If all points are the same, s01 & s02 will be inf\n\t\ts01 = isNaN(s01) ? 0 : s01;\n\t\ts12 = isNaN(s12) ? 0 : s12;\n\n\t\tvar fa = t * s01; // scaling factor for triangle Ta\n\t\tvar fb = t * s12;\n\n\t\treturn {\n\t\t\tprevious: {\n\t\t\t\tx: current.x - fa * (next.x - previous.x),\n\t\t\t\ty: current.y - fa * (next.y - previous.y)\n\t\t\t},\n\t\t\tnext: {\n\t\t\t\tx: current.x + fb * (next.x - previous.x),\n\t\t\t\ty: current.y + fb * (next.y - previous.y)\n\t\t\t}\n\t\t};\n\t};\n\thelpers.EPSILON = Number.EPSILON || 1e-14;\n\thelpers.splineCurveMonotone = function(points) {\n\t\t// This function calculates Bézier control points in a similar way than |splineCurve|,\n\t\t// but preserves monotonicity of the provided data and ensures no local extremums are added\n\t\t// between the dataset discrete points due to the interpolation.\n\t\t// See : https://en.wikipedia.org/wiki/Monotone_cubic_interpolation\n\n\t\tvar pointsWithTangents = (points || []).map(function(point) {\n\t\t\treturn {\n\t\t\t\tmodel: point._model,\n\t\t\t\tdeltaK: 0,\n\t\t\t\tmK: 0\n\t\t\t};\n\t\t});\n\n\t\t// Calculate slopes (deltaK) and initialize tangents (mK)\n\t\tvar pointsLen = pointsWithTangents.length;\n\t\tvar i, pointBefore, pointCurrent, pointAfter;\n\t\tfor (i = 0; i < pointsLen; ++i) {\n\t\t\tpointCurrent = pointsWithTangents[i];\n\t\t\tif (pointCurrent.model.skip) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tpointBefore = i > 0 ? pointsWithTangents[i - 1] : null;\n\t\t\tpointAfter = i < pointsLen - 1 ? pointsWithTangents[i + 1] : null;\n\t\t\tif (pointAfter && !pointAfter.model.skip) {\n\t\t\t\tvar slopeDeltaX = (pointAfter.model.x - pointCurrent.model.x);\n\n\t\t\t\t// In the case of two points that appear at the same x pixel, slopeDeltaX is 0\n\t\t\t\tpointCurrent.deltaK = slopeDeltaX !== 0 ? (pointAfter.model.y - pointCurrent.model.y) / slopeDeltaX : 0;\n\t\t\t}\n\n\t\t\tif (!pointBefore || pointBefore.model.skip) {\n\t\t\t\tpointCurrent.mK = pointCurrent.deltaK;\n\t\t\t} else if (!pointAfter || pointAfter.model.skip) {\n\t\t\t\tpointCurrent.mK = pointBefore.deltaK;\n\t\t\t} else if (this.sign(pointBefore.deltaK) !== this.sign(pointCurrent.deltaK)) {\n\t\t\t\tpointCurrent.mK = 0;\n\t\t\t} else {\n\t\t\t\tpointCurrent.mK = (pointBefore.deltaK + pointCurrent.deltaK) / 2;\n\t\t\t}\n\t\t}\n\n\t\t// Adjust tangents to ensure monotonic properties\n\t\tvar alphaK, betaK, tauK, squaredMagnitude;\n\t\tfor (i = 0; i < pointsLen - 1; ++i) {\n\t\t\tpointCurrent = pointsWithTangents[i];\n\t\t\tpointAfter = pointsWithTangents[i + 1];\n\t\t\tif (pointCurrent.model.skip || pointAfter.model.skip) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (helpers.almostEquals(pointCurrent.deltaK, 0, this.EPSILON)) {\n\t\t\t\tpointCurrent.mK = pointAfter.mK = 0;\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\talphaK = pointCurrent.mK / pointCurrent.deltaK;\n\t\t\tbetaK = pointAfter.mK / pointCurrent.deltaK;\n\t\t\tsquaredMagnitude = Math.pow(alphaK, 2) + Math.pow(betaK, 2);\n\t\t\tif (squaredMagnitude <= 9) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\ttauK = 3 / Math.sqrt(squaredMagnitude);\n\t\t\tpointCurrent.mK = alphaK * tauK * pointCurrent.deltaK;\n\t\t\tpointAfter.mK = betaK * tauK * pointCurrent.deltaK;\n\t\t}\n\n\t\t// Compute control points\n\t\tvar deltaX;\n\t\tfor (i = 0; i < pointsLen; ++i) {\n\t\t\tpointCurrent = pointsWithTangents[i];\n\t\t\tif (pointCurrent.model.skip) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tpointBefore = i > 0 ? pointsWithTangents[i - 1] : null;\n\t\t\tpointAfter = i < pointsLen - 1 ? pointsWithTangents[i + 1] : null;\n\t\t\tif (pointBefore && !pointBefore.model.skip) {\n\t\t\t\tdeltaX = (pointCurrent.model.x - pointBefore.model.x) / 3;\n\t\t\t\tpointCurrent.model.controlPointPreviousX = pointCurrent.model.x - deltaX;\n\t\t\t\tpointCurrent.model.controlPointPreviousY = pointCurrent.model.y - deltaX * pointCurrent.mK;\n\t\t\t}\n\t\t\tif (pointAfter && !pointAfter.model.skip) {\n\t\t\t\tdeltaX = (pointAfter.model.x - pointCurrent.model.x) / 3;\n\t\t\t\tpointCurrent.model.controlPointNextX = pointCurrent.model.x + deltaX;\n\t\t\t\tpointCurrent.model.controlPointNextY = pointCurrent.model.y + deltaX * pointCurrent.mK;\n\t\t\t}\n\t\t}\n\t};\n\thelpers.nextItem = function(collection, index, loop) {\n\t\tif (loop) {\n\t\t\treturn index >= collection.length - 1 ? collection[0] : collection[index + 1];\n\t\t}\n\t\treturn index >= collection.length - 1 ? collection[collection.length - 1] : collection[index + 1];\n\t};\n\thelpers.previousItem = function(collection, index, loop) {\n\t\tif (loop) {\n\t\t\treturn index <= 0 ? collection[collection.length - 1] : collection[index - 1];\n\t\t}\n\t\treturn index <= 0 ? collection[0] : collection[index - 1];\n\t};\n\t// Implementation of the nice number algorithm used in determining where axis labels will go\n\thelpers.niceNum = function(range, round) {\n\t\tvar exponent = Math.floor(helpers.log10(range));\n\t\tvar fraction = range / Math.pow(10, exponent);\n\t\tvar niceFraction;\n\n\t\tif (round) {\n\t\t\tif (fraction < 1.5) {\n\t\t\t\tniceFraction = 1;\n\t\t\t} else if (fraction < 3) {\n\t\t\t\tniceFraction = 2;\n\t\t\t} else if (fraction < 7) {\n\t\t\t\tniceFraction = 5;\n\t\t\t} else {\n\t\t\t\tniceFraction = 10;\n\t\t\t}\n\t\t} else if (fraction <= 1.0) {\n\t\t\tniceFraction = 1;\n\t\t} else if (fraction <= 2) {\n\t\t\tniceFraction = 2;\n\t\t} else if (fraction <= 5) {\n\t\t\tniceFraction = 5;\n\t\t} else {\n\t\t\tniceFraction = 10;\n\t\t}\n\n\t\treturn niceFraction * Math.pow(10, exponent);\n\t};\n\t// Easing functions adapted from Robert Penner's easing equations\n\t// http://www.robertpenner.com/easing/\n\tvar easingEffects = helpers.easingEffects = {\n\t\tlinear: function(t) {\n\t\t\treturn t;\n\t\t},\n\t\teaseInQuad: function(t) {\n\t\t\treturn t * t;\n\t\t},\n\t\teaseOutQuad: function(t) {\n\t\t\treturn -1 * t * (t - 2);\n\t\t},\n\t\teaseInOutQuad: function(t) {\n\t\t\tif ((t /= 1 / 2) < 1) {\n\t\t\t\treturn 1 / 2 * t * t;\n\t\t\t}\n\t\t\treturn -1 / 2 * ((--t) * (t - 2) - 1);\n\t\t},\n\t\teaseInCubic: function(t) {\n\t\t\treturn t * t * t;\n\t\t},\n\t\teaseOutCubic: function(t) {\n\t\t\treturn 1 * ((t = t / 1 - 1) * t * t + 1);\n\t\t},\n\t\teaseInOutCubic: function(t) {\n\t\t\tif ((t /= 1 / 2) < 1) {\n\t\t\t\treturn 1 / 2 * t * t * t;\n\t\t\t}\n\t\t\treturn 1 / 2 * ((t -= 2) * t * t + 2);\n\t\t},\n\t\teaseInQuart: function(t) {\n\t\t\treturn t * t * t * t;\n\t\t},\n\t\teaseOutQuart: function(t) {\n\t\t\treturn -1 * ((t = t / 1 - 1) * t * t * t - 1);\n\t\t},\n\t\teaseInOutQuart: function(t) {\n\t\t\tif ((t /= 1 / 2) < 1) {\n\t\t\t\treturn 1 / 2 * t * t * t * t;\n\t\t\t}\n\t\t\treturn -1 / 2 * ((t -= 2) * t * t * t - 2);\n\t\t},\n\t\teaseInQuint: function(t) {\n\t\t\treturn 1 * (t /= 1) * t * t * t * t;\n\t\t},\n\t\teaseOutQuint: function(t) {\n\t\t\treturn 1 * ((t = t / 1 - 1) * t * t * t * t + 1);\n\t\t},\n\t\teaseInOutQuint: function(t) {\n\t\t\tif ((t /= 1 / 2) < 1) {\n\t\t\t\treturn 1 / 2 * t * t * t * t * t;\n\t\t\t}\n\t\t\treturn 1 / 2 * ((t -= 2) * t * t * t * t + 2);\n\t\t},\n\t\teaseInSine: function(t) {\n\t\t\treturn -1 * Math.cos(t / 1 * (Math.PI / 2)) + 1;\n\t\t},\n\t\teaseOutSine: function(t) {\n\t\t\treturn 1 * Math.sin(t / 1 * (Math.PI / 2));\n\t\t},\n\t\teaseInOutSine: function(t) {\n\t\t\treturn -1 / 2 * (Math.cos(Math.PI * t / 1) - 1);\n\t\t},\n\t\teaseInExpo: function(t) {\n\t\t\treturn (t === 0) ? 1 : 1 * Math.pow(2, 10 * (t / 1 - 1));\n\t\t},\n\t\teaseOutExpo: function(t) {\n\t\t\treturn (t === 1) ? 1 : 1 * (-Math.pow(2, -10 * t / 1) + 1);\n\t\t},\n\t\teaseInOutExpo: function(t) {\n\t\t\tif (t === 0) {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\tif (t === 1) {\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\tif ((t /= 1 / 2) < 1) {\n\t\t\t\treturn 1 / 2 * Math.pow(2, 10 * (t - 1));\n\t\t\t}\n\t\t\treturn 1 / 2 * (-Math.pow(2, -10 * --t) + 2);\n\t\t},\n\t\teaseInCirc: function(t) {\n\t\t\tif (t >= 1) {\n\t\t\t\treturn t;\n\t\t\t}\n\t\t\treturn -1 * (Math.sqrt(1 - (t /= 1) * t) - 1);\n\t\t},\n\t\teaseOutCirc: function(t) {\n\t\t\treturn 1 * Math.sqrt(1 - (t = t / 1 - 1) * t);\n\t\t},\n\t\teaseInOutCirc: function(t) {\n\t\t\tif ((t /= 1 / 2) < 1) {\n\t\t\t\treturn -1 / 2 * (Math.sqrt(1 - t * t) - 1);\n\t\t\t}\n\t\t\treturn 1 / 2 * (Math.sqrt(1 - (t -= 2) * t) + 1);\n\t\t},\n\t\teaseInElastic: function(t) {\n\t\t\tvar s = 1.70158;\n\t\t\tvar p = 0;\n\t\t\tvar a = 1;\n\t\t\tif (t === 0) {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\tif ((t /= 1) === 1) {\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\tif (!p) {\n\t\t\t\tp = 1 * 0.3;\n\t\t\t}\n\t\t\tif (a < Math.abs(1)) {\n\t\t\t\ta = 1;\n\t\t\t\ts = p / 4;\n\t\t\t} else {\n\t\t\t\ts = p / (2 * Math.PI) * Math.asin(1 / a);\n\t\t\t}\n\t\t\treturn -(a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * 1 - s) * (2 * Math.PI) / p));\n\t\t},\n\t\teaseOutElastic: function(t) {\n\t\t\tvar s = 1.70158;\n\t\t\tvar p = 0;\n\t\t\tvar a = 1;\n\t\t\tif (t === 0) {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\tif ((t /= 1) === 1) {\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\tif (!p) {\n\t\t\t\tp = 1 * 0.3;\n\t\t\t}\n\t\t\tif (a < Math.abs(1)) {\n\t\t\t\ta = 1;\n\t\t\t\ts = p / 4;\n\t\t\t} else {\n\t\t\t\ts = p / (2 * Math.PI) * Math.asin(1 / a);\n\t\t\t}\n\t\t\treturn a * Math.pow(2, -10 * t) * Math.sin((t * 1 - s) * (2 * Math.PI) / p) + 1;\n\t\t},\n\t\teaseInOutElastic: function(t) {\n\t\t\tvar s = 1.70158;\n\t\t\tvar p = 0;\n\t\t\tvar a = 1;\n\t\t\tif (t === 0) {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\tif ((t /= 1 / 2) === 2) {\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\tif (!p) {\n\t\t\t\tp = 1 * (0.3 * 1.5);\n\t\t\t}\n\t\t\tif (a < Math.abs(1)) {\n\t\t\t\ta = 1;\n\t\t\t\ts = p / 4;\n\t\t\t} else {\n\t\t\t\ts = p / (2 * Math.PI) * Math.asin(1 / a);\n\t\t\t}\n\t\t\tif (t < 1) {\n\t\t\t\treturn -0.5 * (a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * 1 - s) * (2 * Math.PI) / p));\n\t\t\t}\n\t\t\treturn a * Math.pow(2, -10 * (t -= 1)) * Math.sin((t * 1 - s) * (2 * Math.PI) / p) * 0.5 + 1;\n\t\t},\n\t\teaseInBack: function(t) {\n\t\t\tvar s = 1.70158;\n\t\t\treturn 1 * (t /= 1) * t * ((s + 1) * t - s);\n\t\t},\n\t\teaseOutBack: function(t) {\n\t\t\tvar s = 1.70158;\n\t\t\treturn 1 * ((t = t / 1 - 1) * t * ((s + 1) * t + s) + 1);\n\t\t},\n\t\teaseInOutBack: function(t) {\n\t\t\tvar s = 1.70158;\n\t\t\tif ((t /= 1 / 2) < 1) {\n\t\t\t\treturn 1 / 2 * (t * t * (((s *= (1.525)) + 1) * t - s));\n\t\t\t}\n\t\t\treturn 1 / 2 * ((t -= 2) * t * (((s *= (1.525)) + 1) * t + s) + 2);\n\t\t},\n\t\teaseInBounce: function(t) {\n\t\t\treturn 1 - easingEffects.easeOutBounce(1 - t);\n\t\t},\n\t\teaseOutBounce: function(t) {\n\t\t\tif ((t /= 1) < (1 / 2.75)) {\n\t\t\t\treturn 1 * (7.5625 * t * t);\n\t\t\t} else if (t < (2 / 2.75)) {\n\t\t\t\treturn 1 * (7.5625 * (t -= (1.5 / 2.75)) * t + 0.75);\n\t\t\t} else if (t < (2.5 / 2.75)) {\n\t\t\t\treturn 1 * (7.5625 * (t -= (2.25 / 2.75)) * t + 0.9375);\n\t\t\t}\n\t\t\treturn 1 * (7.5625 * (t -= (2.625 / 2.75)) * t + 0.984375);\n\t\t},\n\t\teaseInOutBounce: function(t) {\n\t\t\tif (t < 1 / 2) {\n\t\t\t\treturn easingEffects.easeInBounce(t * 2) * 0.5;\n\t\t\t}\n\t\t\treturn easingEffects.easeOutBounce(t * 2 - 1) * 0.5 + 1 * 0.5;\n\t\t}\n\t};\n\t// Request animation polyfill - http://www.paulirish.com/2011/requestanimationframe-for-smart-animating/\n\thelpers.requestAnimFrame = (function() {\n\t\treturn window.requestAnimationFrame ||\n\t\t\twindow.webkitRequestAnimationFrame ||\n\t\t\twindow.mozRequestAnimationFrame ||\n\t\t\twindow.oRequestAnimationFrame ||\n\t\t\twindow.msRequestAnimationFrame ||\n\t\t\tfunction(callback) {\n\t\t\t\treturn window.setTimeout(callback, 1000 / 60);\n\t\t\t};\n\t}());\n\t// -- DOM methods\n\thelpers.getRelativePosition = function(evt, chart) {\n\t\tvar mouseX, mouseY;\n\t\tvar e = evt.originalEvent || evt,\n\t\t\tcanvas = evt.currentTarget || evt.srcElement,\n\t\t\tboundingRect = canvas.getBoundingClientRect();\n\n\t\tvar touches = e.touches;\n\t\tif (touches && touches.length > 0) {\n\t\t\tmouseX = touches[0].clientX;\n\t\t\tmouseY = touches[0].clientY;\n\n\t\t} else {\n\t\t\tmouseX = e.clientX;\n\t\t\tmouseY = e.clientY;\n\t\t}\n\n\t\t// Scale mouse coordinates into canvas coordinates\n\t\t// by following the pattern laid out by 'jerryj' in the comments of\n\t\t// http://www.html5canvastutorials.com/advanced/html5-canvas-mouse-coordinates/\n\t\tvar paddingLeft = parseFloat(helpers.getStyle(canvas, 'padding-left'));\n\t\tvar paddingTop = parseFloat(helpers.getStyle(canvas, 'padding-top'));\n\t\tvar paddingRight = parseFloat(helpers.getStyle(canvas, 'padding-right'));\n\t\tvar paddingBottom = parseFloat(helpers.getStyle(canvas, 'padding-bottom'));\n\t\tvar width = boundingRect.right - boundingRect.left - paddingLeft - paddingRight;\n\t\tvar height = boundingRect.bottom - boundingRect.top - paddingTop - paddingBottom;\n\n\t\t// We divide by the current device pixel ratio, because the canvas is scaled up by that amount in each direction. However\n\t\t// the backend model is in unscaled coordinates. Since we are going to deal with our model coordinates, we go back here\n\t\tmouseX = Math.round((mouseX - boundingRect.left - paddingLeft) / (width) * canvas.width / chart.currentDevicePixelRatio);\n\t\tmouseY = Math.round((mouseY - boundingRect.top - paddingTop) / (height) * canvas.height / chart.currentDevicePixelRatio);\n\n\t\treturn {\n\t\t\tx: mouseX,\n\t\t\ty: mouseY\n\t\t};\n\n\t};\n\thelpers.addEvent = function(node, eventType, method) {\n\t\tif (node.addEventListener) {\n\t\t\tnode.addEventListener(eventType, method);\n\t\t} else if (node.attachEvent) {\n\t\t\tnode.attachEvent('on' + eventType, method);\n\t\t} else {\n\t\t\tnode['on' + eventType] = method;\n\t\t}\n\t};\n\thelpers.removeEvent = function(node, eventType, handler) {\n\t\tif (node.removeEventListener) {\n\t\t\tnode.removeEventListener(eventType, handler, false);\n\t\t} else if (node.detachEvent) {\n\t\t\tnode.detachEvent('on' + eventType, handler);\n\t\t} else {\n\t\t\tnode['on' + eventType] = helpers.noop;\n\t\t}\n\t};\n\n\t// Private helper function to convert max-width/max-height values that may be percentages into a number\n\tfunction parseMaxStyle(styleValue, node, parentProperty) {\n\t\tvar valueInPixels;\n\t\tif (typeof(styleValue) === 'string') {\n\t\t\tvalueInPixels = parseInt(styleValue, 10);\n\n\t\t\tif (styleValue.indexOf('%') !== -1) {\n\t\t\t\t// percentage * size in dimension\n\t\t\t\tvalueInPixels = valueInPixels / 100 * node.parentNode[parentProperty];\n\t\t\t}\n\t\t} else {\n\t\t\tvalueInPixels = styleValue;\n\t\t}\n\n\t\treturn valueInPixels;\n\t}\n\n\t/**\n\t * Returns if the given value contains an effective constraint.\n\t * @private\n\t */\n\tfunction isConstrainedValue(value) {\n\t\treturn value !== undefined && value !== null && value !== 'none';\n\t}\n\n\t// Private helper to get a constraint dimension\n\t// @param domNode : the node to check the constraint on\n\t// @param maxStyle : the style that defines the maximum for the direction we are using (maxWidth / maxHeight)\n\t// @param percentageProperty : property of parent to use when calculating width as a percentage\n\t// @see http://www.nathanaeljones.com/blog/2013/reading-max-width-cross-browser\n\tfunction getConstraintDimension(domNode, maxStyle, percentageProperty) {\n\t\tvar view = document.defaultView;\n\t\tvar parentNode = domNode.parentNode;\n\t\tvar constrainedNode = view.getComputedStyle(domNode)[maxStyle];\n\t\tvar constrainedContainer = view.getComputedStyle(parentNode)[maxStyle];\n\t\tvar hasCNode = isConstrainedValue(constrainedNode);\n\t\tvar hasCContainer = isConstrainedValue(constrainedContainer);\n\t\tvar infinity = Number.POSITIVE_INFINITY;\n\n\t\tif (hasCNode || hasCContainer) {\n\t\t\treturn Math.min(\n\t\t\t\thasCNode? parseMaxStyle(constrainedNode, domNode, percentageProperty) : infinity,\n\t\t\t\thasCContainer? parseMaxStyle(constrainedContainer, parentNode, percentageProperty) : infinity);\n\t\t}\n\n\t\treturn 'none';\n\t}\n\t// returns Number or undefined if no constraint\n\thelpers.getConstraintWidth = function(domNode) {\n\t\treturn getConstraintDimension(domNode, 'max-width', 'clientWidth');\n\t};\n\t// returns Number or undefined if no constraint\n\thelpers.getConstraintHeight = function(domNode) {\n\t\treturn getConstraintDimension(domNode, 'max-height', 'clientHeight');\n\t};\n\thelpers.getMaximumWidth = function(domNode) {\n\t\tvar container = domNode.parentNode;\n\t\tvar paddingLeft = parseInt(helpers.getStyle(container, 'padding-left'), 10);\n\t\tvar paddingRight = parseInt(helpers.getStyle(container, 'padding-right'), 10);\n\t\tvar w = container.clientWidth - paddingLeft - paddingRight;\n\t\tvar cw = helpers.getConstraintWidth(domNode);\n\t\treturn isNaN(cw)? w : Math.min(w, cw);\n\t};\n\thelpers.getMaximumHeight = function(domNode) {\n\t\tvar container = domNode.parentNode;\n\t\tvar paddingTop = parseInt(helpers.getStyle(container, 'padding-top'), 10);\n\t\tvar paddingBottom = parseInt(helpers.getStyle(container, 'padding-bottom'), 10);\n\t\tvar h = container.clientHeight - paddingTop - paddingBottom;\n\t\tvar ch = helpers.getConstraintHeight(domNode);\n\t\treturn isNaN(ch)? h : Math.min(h, ch);\n\t};\n\thelpers.getStyle = function(el, property) {\n\t\treturn el.currentStyle ?\n\t\t\tel.currentStyle[property] :\n\t\t\tdocument.defaultView.getComputedStyle(el, null).getPropertyValue(property);\n\t};\n\thelpers.retinaScale = function(chart) {\n\t\tvar pixelRatio = chart.currentDevicePixelRatio = window.devicePixelRatio || 1;\n\t\tif (pixelRatio === 1) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar canvas = chart.canvas;\n\t\tvar height = chart.height;\n\t\tvar width = chart.width;\n\n\t\tcanvas.height = height * pixelRatio;\n\t\tcanvas.width = width * pixelRatio;\n\t\tchart.ctx.scale(pixelRatio, pixelRatio);\n\n\t\t// If no style has been set on the canvas, the render size is used as display size,\n\t\t// making the chart visually bigger, so let's enforce it to the \"correct\" values.\n\t\t// See https://github.com/chartjs/Chart.js/issues/3575\n\t\tcanvas.style.height = height + 'px';\n\t\tcanvas.style.width = width + 'px';\n\t};\n\t// -- Canvas methods\n\thelpers.clear = function(chart) {\n\t\tchart.ctx.clearRect(0, 0, chart.width, chart.height);\n\t};\n\thelpers.fontString = function(pixelSize, fontStyle, fontFamily) {\n\t\treturn fontStyle + ' ' + pixelSize + 'px ' + fontFamily;\n\t};\n\thelpers.longestText = function(ctx, font, arrayOfThings, cache) {\n\t\tcache = cache || {};\n\t\tvar data = cache.data = cache.data || {};\n\t\tvar gc = cache.garbageCollect = cache.garbageCollect || [];\n\n\t\tif (cache.font !== font) {\n\t\t\tdata = cache.data = {};\n\t\t\tgc = cache.garbageCollect = [];\n\t\t\tcache.font = font;\n\t\t}\n\n\t\tctx.font = font;\n\t\tvar longest = 0;\n\t\thelpers.each(arrayOfThings, function(thing) {\n\t\t\t// Undefined strings and arrays should not be measured\n\t\t\tif (thing !== undefined && thing !== null && helpers.isArray(thing) !== true) {\n\t\t\t\tlongest = helpers.measureText(ctx, data, gc, longest, thing);\n\t\t\t} else if (helpers.isArray(thing)) {\n\t\t\t\t// if it is an array lets measure each element\n\t\t\t\t// to do maybe simplify this function a bit so we can do this more recursively?\n\t\t\t\thelpers.each(thing, function(nestedThing) {\n\t\t\t\t\t// Undefined strings and arrays should not be measured\n\t\t\t\t\tif (nestedThing !== undefined && nestedThing !== null && !helpers.isArray(nestedThing)) {\n\t\t\t\t\t\tlongest = helpers.measureText(ctx, data, gc, longest, nestedThing);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tvar gcLen = gc.length / 2;\n\t\tif (gcLen > arrayOfThings.length) {\n\t\t\tfor (var i = 0; i < gcLen; i++) {\n\t\t\t\tdelete data[gc[i]];\n\t\t\t}\n\t\t\tgc.splice(0, gcLen);\n\t\t}\n\t\treturn longest;\n\t};\n\thelpers.measureText = function(ctx, data, gc, longest, string) {\n\t\tvar textWidth = data[string];\n\t\tif (!textWidth) {\n\t\t\ttextWidth = data[string] = ctx.measureText(string).width;\n\t\t\tgc.push(string);\n\t\t}\n\t\tif (textWidth > longest) {\n\t\t\tlongest = textWidth;\n\t\t}\n\t\treturn longest;\n\t};\n\thelpers.numberOfLabelLines = function(arrayOfThings) {\n\t\tvar numberOfLines = 1;\n\t\thelpers.each(arrayOfThings, function(thing) {\n\t\t\tif (helpers.isArray(thing)) {\n\t\t\t\tif (thing.length > numberOfLines) {\n\t\t\t\t\tnumberOfLines = thing.length;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\treturn numberOfLines;\n\t};\n\thelpers.drawRoundedRectangle = function(ctx, x, y, width, height, radius) {\n\t\tctx.beginPath();\n\t\tctx.moveTo(x + radius, y);\n\t\tctx.lineTo(x + width - radius, y);\n\t\tctx.quadraticCurveTo(x + width, y, x + width, y + radius);\n\t\tctx.lineTo(x + width, y + height - radius);\n\t\tctx.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);\n\t\tctx.lineTo(x + radius, y + height);\n\t\tctx.quadraticCurveTo(x, y + height, x, y + height - radius);\n\t\tctx.lineTo(x, y + radius);\n\t\tctx.quadraticCurveTo(x, y, x + radius, y);\n\t\tctx.closePath();\n\t};\n\thelpers.color = function(c) {\n\t\tif (!color) {\n\t\t\tconsole.error('Color.js not found!');\n\t\t\treturn c;\n\t\t}\n\n\t\t/* global CanvasGradient */\n\t\tif (c instanceof CanvasGradient) {\n\t\t\treturn color(Chart.defaults.global.defaultColor);\n\t\t}\n\n\t\treturn color(c);\n\t};\n\thelpers.isArray = Array.isArray?\n\t\tfunction(obj) {\n\t\t\treturn Array.isArray(obj);\n\t\t} :\n\t\tfunction(obj) {\n\t\t\treturn Object.prototype.toString.call(obj) === '[object Array]';\n\t\t};\n\t// ! @see http://stackoverflow.com/a/14853974\n\thelpers.arrayEquals = function(a0, a1) {\n\t\tvar i, ilen, v0, v1;\n\n\t\tif (!a0 || !a1 || a0.length !== a1.length) {\n\t\t\treturn false;\n\t\t}\n\n\t\tfor (i = 0, ilen=a0.length; i < ilen; ++i) {\n\t\t\tv0 = a0[i];\n\t\t\tv1 = a1[i];\n\n\t\t\tif (v0 instanceof Array && v1 instanceof Array) {\n\t\t\t\tif (!helpers.arrayEquals(v0, v1)) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t} else if (v0 !== v1) {\n\t\t\t\t// NOTE: two different object instances will never be equal: {x:20} != {x:20}\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t};\n\thelpers.callCallback = function(fn, args, _tArg) {\n\t\tif (fn && typeof fn.call === 'function') {\n\t\t\tfn.apply(_tArg, args);\n\t\t}\n\t};\n\thelpers.getHoverColor = function(colorValue) {\n\t\t/* global CanvasPattern */\n\t\treturn (colorValue instanceof CanvasPattern) ?\n\t\t\tcolorValue :\n\t\t\thelpers.color(colorValue).saturate(0.5).darken(0.1).rgbString();\n\t};\n};\n"]},"metadata":{},"sourceType":"script"}