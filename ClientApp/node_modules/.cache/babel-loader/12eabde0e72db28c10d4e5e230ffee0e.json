{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Kronos\\\\Documents\\\\Programming\\\\Web\\\\React\\\\CS-3750-Project\\\\ClientApp\\\\src\\\\components\\\\Courses\\\\CourseFinalGrade.js\";\nimport React, { useContext, useState, useEffect } from \"react\";\nimport { AuthContext } from \"../../context/AuthProvider\";\nimport { DataContext } from \"../../context/DataProvider\";\nexport default function CourseFinalGrade({\n  course\n}) {\n  const {\n    isInstructor\n  } = useContext(AuthContext);\n  const {\n    assignments,\n    submissions\n  } = useContext(DataContext);\n  const [finalGrade, setFinalGrade] = useState();\n  useEffect(() => {\n    const grade = getFinalGrade();\n    setFinalGrade(grade);\n  }, [course]);\n\n  const getFinalGrade = () => {\n    if (!isInstructor) {\n      //get assignments for this course\n      const assignmentList = assignments.filter(a => a.courseId == course.courseId);\n      let totalPoints = 0;\n      let totalReceivedScore = 0;\n\n      if (assignmentList.length > 0) {\n        assignmentList.forEach(assignment => {\n          var _assignmentSubmission;\n\n          //get submission for assignment\n          const assignmentSubmission = submissions === null || submissions === void 0 ? void 0 : submissions.filter(a => a.assignmentId == assignment.assignmentId);\n\n          if (((_assignmentSubmission = assignmentSubmission[0]) === null || _assignmentSubmission === void 0 ? void 0 : _assignmentSubmission.receivedScore) != null) {\n            var _assignmentSubmission2;\n\n            totalPoints += assignment.maxPoints;\n            totalReceivedScore += (_assignmentSubmission2 = assignmentSubmission[0]) === null || _assignmentSubmission2 === void 0 ? void 0 : _assignmentSubmission2.receivedScore;\n          }\n        });\n        let score = 0;\n        if (totalPoints > 0) score = (100 * (totalReceivedScore / totalPoints)).toFixed(2);\n        return score;\n      }\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 12\n    }\n  }, isInstructor ? \"\" : \"Final grade :\" + finalGrade + \"%\");\n}","map":{"version":3,"sources":["C:/Users/Kronos/Documents/Programming/Web/React/CS-3750-Project/ClientApp/src/components/Courses/CourseFinalGrade.js"],"names":["React","useContext","useState","useEffect","AuthContext","DataContext","CourseFinalGrade","course","isInstructor","assignments","submissions","finalGrade","setFinalGrade","grade","getFinalGrade","assignmentList","filter","a","courseId","totalPoints","totalReceivedScore","length","forEach","assignment","assignmentSubmission","assignmentId","receivedScore","maxPoints","score","toFixed"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,UAAhB,EAA4BC,QAA5B,EAAsCC,SAAtC,QAAuD,OAAvD;AACA,SAASC,WAAT,QAA4B,4BAA5B;AACA,SAASC,WAAT,QAA4B,4BAA5B;AAEA,eAAe,SAASC,gBAAT,CAA0B;AAAEC,EAAAA;AAAF,CAA1B,EAAsC;AACjD,QAAM;AAAEC,IAAAA;AAAF,MAAmBP,UAAU,CAACG,WAAD,CAAnC;AACA,QAAM;AAAEK,IAAAA,WAAF;AAAeC,IAAAA;AAAf,MAA+BT,UAAU,CAACI,WAAD,CAA/C;AACA,QAAM,CAACM,UAAD,EAAaC,aAAb,IAA8BV,QAAQ,EAA5C;AAEAC,EAAAA,SAAS,CAAC,MAAM;AACZ,UAAMU,KAAK,GAAGC,aAAa,EAA3B;AACAF,IAAAA,aAAa,CAACC,KAAD,CAAb;AACH,GAHQ,EAGN,CAACN,MAAD,CAHM,CAAT;;AAKA,QAAMO,aAAa,GAAG,MAAM;AACxB,QAAI,CAACN,YAAL,EAAmB;AACf;AACA,YAAMO,cAAc,GAAGN,WAAW,CAACO,MAAZ,CAClBC,CAAD,IAAOA,CAAC,CAACC,QAAF,IAAcX,MAAM,CAACW,QADT,CAAvB;AAGA,UAAIC,WAAW,GAAG,CAAlB;AACA,UAAIC,kBAAkB,GAAG,CAAzB;;AACA,UAAIL,cAAc,CAACM,MAAf,GAAwB,CAA5B,EAA+B;AAC3BN,QAAAA,cAAc,CAACO,OAAf,CAAwBC,UAAD,IAAgB;AAAA;;AACnC;AACA,gBAAMC,oBAAoB,GAAGd,WAAH,aAAGA,WAAH,uBAAGA,WAAW,CAAEM,MAAb,CACxBC,CAAD,IAAOA,CAAC,CAACQ,YAAF,IAAkBF,UAAU,CAACE,YADX,CAA7B;;AAIA,cAAI,0BAAAD,oBAAoB,CAAC,CAAD,CAApB,gFAAyBE,aAAzB,KAA0C,IAA9C,EAAoD;AAAA;;AAChDP,YAAAA,WAAW,IAAII,UAAU,CAACI,SAA1B;AACAP,YAAAA,kBAAkB,8BACdI,oBAAoB,CAAC,CAAD,CADN,2DACd,uBAAyBE,aAD7B;AAEH;AACJ,SAXD;AAaA,YAAIE,KAAK,GAAG,CAAZ;AACA,YAAIT,WAAW,GAAG,CAAlB,EACIS,KAAK,GAAG,CAAC,OAAOR,kBAAkB,GAAGD,WAA5B,CAAD,EAA2CU,OAA3C,CAAoD,CAApD,CAAR;AACJ,eAAOD,KAAP;AACH;AACJ;AACJ,GA5BD;;AA6BA,sBAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAMpB,YAAY,GAAG,EAAH,GAAQ,kBAAkBG,UAAlB,GAA+B,GAAzD,CAAP;AACH","sourcesContent":["import React, { useContext, useState, useEffect } from \"react\";\r\nimport { AuthContext } from \"../../context/AuthProvider\";\r\nimport { DataContext } from \"../../context/DataProvider\";\r\n\r\nexport default function CourseFinalGrade({ course }) {\r\n    const { isInstructor } = useContext(AuthContext);\r\n    const { assignments, submissions } = useContext(DataContext);\r\n    const [finalGrade, setFinalGrade] = useState();\r\n\r\n    useEffect(() => {\r\n        const grade = getFinalGrade();\r\n        setFinalGrade(grade);\r\n    }, [course]);\r\n\r\n    const getFinalGrade = () => {\r\n        if (!isInstructor) {\r\n            //get assignments for this course\r\n            const assignmentList = assignments.filter(\r\n                (a) => a.courseId == course.courseId\r\n            );\r\n            let totalPoints = 0;\r\n            let totalReceivedScore = 0;\r\n            if (assignmentList.length > 0) {\r\n                assignmentList.forEach((assignment) => {\r\n                    //get submission for assignment\r\n                    const assignmentSubmission = submissions?.filter(\r\n                        (a) => a.assignmentId == assignment.assignmentId\r\n                    );\r\n\r\n                    if (assignmentSubmission[0]?.receivedScore != null) {\r\n                        totalPoints += assignment.maxPoints;\r\n                        totalReceivedScore +=\r\n                            assignmentSubmission[0]?.receivedScore;\r\n                    }\r\n                });\r\n\r\n                let score = 0;\r\n                if (totalPoints > 0)\r\n                    score = (100 * (totalReceivedScore / totalPoints)).toFixed( 2 );\r\n                return score;\r\n            }\r\n        }\r\n    };\r\n    return <div>{isInstructor ? \"\" : \"Final grade :\" + finalGrade + \"%\"}</div>;\r\n}\r\n"]},"metadata":{},"sourceType":"module"}